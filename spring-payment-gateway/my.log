2022-03-02 15:45:40.318  INFO 1560 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 1560 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 15:45:40.324  INFO 1560 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 15:45:41.440  INFO 1560 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 15:45:41.591  INFO 1560 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 145 ms. Found 4 MongoDB repository interfaces.
2022-03-02 15:45:41.897  INFO 1560 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 15:45:42.336  INFO 1560 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 15:45:42.347  INFO 1560 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 15:45:42.347  INFO 1560 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 15:45:42.495  INFO 1560 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 15:45:42.496  INFO 1560 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2112 ms
2022-03-02 15:45:42.855  INFO 1560 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 15:45:42.951  WARN 1560 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 15:45:42.952  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:45:43.005  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:45:43.007  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:45:43.129  WARN 1560 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-rtt-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:349465}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-rtt-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:345160}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:349465}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:345160}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-rtt-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:344377}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:344377}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=285923100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 15:45:30 MSK 2022, lastUpdateTimeNanos=20758851068600}
2022-03-02 15:45:43.513  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=280222500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 15:45:30 MSK 2022, lastUpdateTimeNanos=20758850838300}
2022-03-02 15:45:43.514  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=285938200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 15:45:30 MSK 2022, lastUpdateTimeNanos=20758851083700}
2022-03-02 15:45:43.517  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.517  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.517  INFO 1560 --- [cluster-ClusterId{value='621f66f6d199c03388b1da4c', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:45:43.534  INFO 1560 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 15:45:43.659  INFO 1560 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 15:45:43.916  INFO 1560 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 15:45:43.990  WARN 1560 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 15:45:44.467  INFO 1560 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 15:45:44.519  WARN 1560 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 15:45:44.526  INFO 1560 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 15:45:44.568  INFO 1560 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 15:45:44.650  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 15:45:44.657  INFO 1560 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 15:45:44.695  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 15:45:44.695  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 15:45:44.696  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 15:45:44.696  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 15:45:44.696  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 15:45:44.696  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 15:45:44.696  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 15:45:44.979  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 15:45:44.985  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 15:45:44.991  INFO 1560 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 15:45:45.003  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646225145002 with initial instances count: 1
2022-03-02 15:45:45.005  INFO 1560 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 15:45:45.006  INFO 1560 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646225145005, current=UP, previous=STARTING]
2022-03-02 15:45:45.007  INFO 1560 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 15:45:45.028  INFO 1560 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 15:45:45.029  INFO 1560 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 15:45:45.051  INFO 1560 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 15:45:45.135  INFO 1560 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.467 seconds (JVM running for 5.998)
2022-03-02 15:45:58.295  INFO 1560 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 15:45:58.295  INFO 1560 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 15:45:58.298  INFO 1560 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 15:45:58.700  INFO 1560 --- [http-nio-9001-exec-1] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:349468}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:47:25.059  INFO 1560 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 15:47:25.060  INFO 1560 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646225245060, current=DOWN, previous=UP]
2022-03-02 15:47:25.060  INFO 1560 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 15:47:25.066  INFO 1560 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 15:47:25.267  INFO 1560 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 15:47:28.279  INFO 1560 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 15:47:28.285  INFO 1560 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 15:47:28.290  INFO 1560 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 15:51:01.745  INFO 16248 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 16248 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 15:51:01.747  INFO 16248 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 15:51:02.963  INFO 16248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 15:51:03.112  INFO 16248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 142 ms. Found 4 MongoDB repository interfaces.
2022-03-02 15:51:03.404  INFO 16248 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 15:51:03.849  INFO 16248 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 15:51:03.861  INFO 16248 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 15:51:03.861  INFO 16248 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 15:51:04.009  INFO 16248 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 15:51:04.009  INFO 16248 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2207 ms
2022-03-02 15:51:04.430  INFO 16248 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 15:51:04.522  WARN 16248 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 15:51:04.529  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:51:04.587  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:51:04.588  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:51:04.695  WARN 16248 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 15:51:05.045  INFO 16248 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 15:51:05.108  INFO 16248 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 15:51:05.297  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:344462}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.297  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:345246}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.297  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:349553}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.297  INFO 16248 --- [cluster-rtt-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:349553}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.298  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=307919300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 15:51:05 MSK 2022, lastUpdateTimeNanos=21080634577000}
2022-03-02 15:51:05.298  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=310139500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 15:51:05 MSK 2022, lastUpdateTimeNanos=21080634469700}
2022-03-02 15:51:05.298  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=310139600, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 15:51:05 MSK 2022, lastUpdateTimeNanos=21080634469700}
2022-03-02 15:51:05.300  INFO 16248 --- [cluster-rtt-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:345246}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.301  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.302  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.302  INFO 16248 --- [cluster-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.303  INFO 16248 --- [cluster-rtt-ClusterId{value='621f68389d1ea8399b5ed23a', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:344462}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 15:51:05.422  INFO 16248 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 15:51:05.488  WARN 16248 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 15:51:05.976  INFO 16248 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 15:51:06.041  WARN 16248 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 15:51:06.048  INFO 16248 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 15:51:06.080  INFO 16248 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 15:51:06.166  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 15:51:06.174  INFO 16248 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 15:51:06.205  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 15:51:06.206  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 15:51:06.206  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 15:51:06.206  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 15:51:06.206  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 15:51:06.206  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 15:51:06.206  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 15:51:06.505  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 15:51:06.513  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 15:51:06.518  INFO 16248 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 15:51:06.531  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646225466530 with initial instances count: 2
2022-03-02 15:51:06.533  INFO 16248 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 15:51:06.534  INFO 16248 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646225466534, current=UP, previous=STARTING]
2022-03-02 15:51:06.536  INFO 16248 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 15:51:06.559  INFO 16248 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 15:51:06.561  INFO 16248 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 15:51:06.586  INFO 16248 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 15:51:06.652  INFO 16248 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.552 seconds (JVM running for 6.115)
2022-03-02 15:51:13.460  INFO 16248 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 15:51:13.460  INFO 16248 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 15:51:13.462  INFO 16248 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 15:51:41.622  INFO 16248 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:349549}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:51:41.688 ERROR 16248 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 15:52:55.866  INFO 16248 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 15:52:55.867  INFO 16248 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646225575867, current=DOWN, previous=UP]
2022-03-02 15:52:55.867  INFO 16248 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 15:52:55.872  INFO 16248 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 15:52:56.084  INFO 16248 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 15:52:59.100  INFO 16248 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 15:52:59.105  INFO 16248 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 15:52:59.110  INFO 16248 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 15:54:14.587  INFO 16644 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 16644 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 15:54:14.590  INFO 16644 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 15:54:15.671  INFO 16644 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 15:54:15.823  INFO 16644 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 4 MongoDB repository interfaces.
2022-03-02 15:54:16.100  INFO 16644 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 15:54:16.527  INFO 16644 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 15:54:16.540  INFO 16644 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 15:54:16.541  INFO 16644 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 15:54:16.676  INFO 16644 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 15:54:16.676  INFO 16644 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2029 ms
2022-03-02 15:54:17.096  INFO 16644 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 15:54:17.192  WARN 16644 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 15:54:17.211  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:54:17.264  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:54:17.266  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 15:54:17.372  WARN 16644 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 15:54:17.716  INFO 16644 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 15:54:17.811  INFO 16644 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 15:54:17.971  INFO 16644 --- [cluster-rtt-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:345303}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.972  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:344511}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.972  INFO 16644 --- [cluster-rtt-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:344511}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.972  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:345303}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.972  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:349576}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.972  INFO 16644 --- [cluster-rtt-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:349576}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.973  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=299206200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 15:54:15 MSK 2022, lastUpdateTimeNanos=21273309455300}
2022-03-02 15:54:17.973  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=299593700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 15:54:15 MSK 2022, lastUpdateTimeNanos=21273309455300}
2022-03-02 15:54:17.973  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=297439300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 15:54:15 MSK 2022, lastUpdateTimeNanos=21273309455300}
2022-03-02 15:54:17.976  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.976  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:54:17.976  INFO 16644 --- [cluster-ClusterId{value='621f68f96c89010ebccf3467', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:54:18.100  INFO 16644 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 15:54:18.169  WARN 16644 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 15:54:18.656  INFO 16644 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 15:54:18.715  WARN 16644 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 15:54:18.730  INFO 16644 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 15:54:18.767  INFO 16644 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 15:54:18.850  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 15:54:18.857  INFO 16644 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 15:54:18.890  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 15:54:18.890  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 15:54:18.890  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 15:54:18.890  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 15:54:18.891  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 15:54:18.891  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 15:54:18.891  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 15:54:19.166  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 15:54:19.174  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 15:54:19.179  INFO 16644 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 15:54:19.191  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646225659190 with initial instances count: 3
2022-03-02 15:54:19.192  INFO 16644 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 15:54:19.192  INFO 16644 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646225659192, current=UP, previous=STARTING]
2022-03-02 15:54:19.194  INFO 16644 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 15:54:19.216  INFO 16644 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 15:54:19.217  INFO 16644 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 15:54:19.236  INFO 16644 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 15:54:19.309  INFO 16644 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.407 seconds (JVM running for 6.073)
2022-03-02 15:54:26.623  INFO 16644 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 15:54:26.624  INFO 16644 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 15:54:26.625  INFO 16644 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2022-03-02 15:54:38.824  INFO 16644 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:349607}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 15:54:38.906 ERROR 16644 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 15:56:00.423 ERROR 16644 --- [http-nio-9001-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 15:59:18.898  INFO 16644 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 15:59:22.608  INFO 16644 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 15:59:22.608  INFO 16644 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646225962608, current=DOWN, previous=UP]
2022-03-02 15:59:22.609  INFO 16644 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 15:59:22.613  INFO 16644 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 15:59:22.814  INFO 16644 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 15:59:25.830  INFO 16644 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 15:59:25.835  INFO 16644 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 15:59:25.839  INFO 16644 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 16:22:12.213  INFO 18344 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 18344 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 16:22:12.216  INFO 18344 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 16:22:13.341  INFO 18344 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 16:22:13.493  INFO 18344 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 147 ms. Found 4 MongoDB repository interfaces.
2022-03-02 16:22:13.774  INFO 18344 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 16:22:14.224  INFO 18344 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 16:22:14.235  INFO 18344 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 16:22:14.236  INFO 18344 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 16:22:14.370  INFO 18344 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 16:22:14.371  INFO 18344 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2099 ms
2022-03-02 16:22:14.779  INFO 18344 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 16:22:14.883  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:22:14.883  WARN 18344 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:22:14.926  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:22:14.928  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:22:15.047  WARN 18344 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:22:15.385  INFO 18344 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:22:15.456  INFO 18344 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:344935}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-rtt-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:349990}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-rtt-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:344935}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350030}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-rtt-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:345728}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=298173200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 16:22:14 MSK 2022, lastUpdateTimeNanos=22950939872700}
2022-03-02 16:22:15.602  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:345728}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.603  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=295987500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 16:22:14 MSK 2022, lastUpdateTimeNanos=22950939329700}
2022-03-02 16:22:15.603  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=296687400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 16:22:14 MSK 2022, lastUpdateTimeNanos=22950940025000}
2022-03-02 16:22:15.606  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.607  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.607  INFO 18344 --- [cluster-ClusterId{value='621f6f868b05d97e98e0fda5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:22:15.723  INFO 18344 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 16:22:15.789  WARN 18344 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 16:22:16.267  INFO 18344 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 16:22:16.325  WARN 18344 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 16:22:16.335  INFO 18344 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 16:22:16.390  INFO 18344 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 16:22:16.486  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 16:22:16.492  INFO 18344 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:22:16.525  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 16:22:16.525  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 16:22:16.525  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 16:22:16.525  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 16:22:16.526  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 16:22:16.526  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 16:22:16.526  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 16:22:16.828  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 16:22:16.834  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 16:22:16.839  INFO 18344 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 16:22:16.852  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646227336851 with initial instances count: 2
2022-03-02 16:22:16.853  INFO 18344 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 16:22:16.854  INFO 18344 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646227336854, current=UP, previous=STARTING]
2022-03-02 16:22:16.857  INFO 18344 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:22:16.882  INFO 18344 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 16:22:16.883  INFO 18344 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 16:22:16.906  INFO 18344 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:22:16.960  INFO 18344 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.394 seconds (JVM running for 5.953)
2022-03-02 16:22:23.292  INFO 18344 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 16:22:23.292  INFO 18344 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 16:22:23.294  INFO 18344 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 16:22:30.281  INFO 18344 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:350033}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:22:30.359 ERROR 18344 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 16:23:25.000 ERROR 18344 --- [http-nio-9001-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 16:24:36.603  INFO 18344 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 16:24:36.604  INFO 18344 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646227476604, current=DOWN, previous=UP]
2022-03-02 16:24:36.604  INFO 18344 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:24:36.612  INFO 18344 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:24:36.841  INFO 18344 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 16:24:39.846  INFO 18344 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 16:24:39.851  INFO 18344 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 16:24:39.857  INFO 18344 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 16:28:06.343  INFO 16332 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 16332 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 16:28:06.345  INFO 16332 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 16:28:07.470  INFO 16332 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 16:28:07.630  INFO 16332 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 154 ms. Found 4 MongoDB repository interfaces.
2022-03-02 16:28:07.908  INFO 16332 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 16:28:08.353  INFO 16332 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 16:28:08.362  INFO 16332 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 16:28:08.362  INFO 16332 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 16:28:08.504  INFO 16332 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 16:28:08.504  INFO 16332 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2106 ms
2022-03-02 16:28:08.909  INFO 16332 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 16:28:09.011  WARN 16332 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:28:09.026  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:28:09.065  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:28:09.067  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:28:09.179  WARN 16332 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:28:09.542  INFO 16332 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:28:09.629  INFO 16332 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:28:09.758  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:345041}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.758  INFO 16332 --- [cluster-rtt-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350113}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.759  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=283392200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 16:28:00 MSK 2022, lastUpdateTimeNanos=23305095894600}
2022-03-02 16:28:09.759  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350113}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.759  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:345827}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.759  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=288433200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 16:28:00 MSK 2022, lastUpdateTimeNanos=23305095898200}
2022-03-02 16:28:09.759  INFO 16332 --- [cluster-rtt-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:345827}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.758  INFO 16332 --- [cluster-rtt-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:345041}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.759  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=288197800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 16:28:00 MSK 2022, lastUpdateTimeNanos=23305095667100}
2022-03-02 16:28:09.762  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.763  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.763  INFO 16332 --- [cluster-ClusterId{value='621f70e8bd36c90a79288cd0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:28:09.907  INFO 16332 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 16:28:09.978  WARN 16332 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 16:28:10.503  INFO 16332 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 16:28:10.564  WARN 16332 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 16:28:10.574  INFO 16332 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 16:28:10.609  INFO 16332 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 16:28:10.700  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 16:28:10.709  INFO 16332 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:28:10.745  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 16:28:10.745  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 16:28:10.746  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 16:28:10.746  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 16:28:10.746  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 16:28:10.746  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 16:28:10.746  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 16:28:11.026  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 16:28:11.033  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 16:28:11.039  INFO 16332 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 16:28:11.052  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646227691051 with initial instances count: 2
2022-03-02 16:28:11.053  INFO 16332 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 16:28:11.054  INFO 16332 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646227691054, current=UP, previous=STARTING]
2022-03-02 16:28:11.055  INFO 16332 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:28:11.077  INFO 16332 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 16:28:11.078  INFO 16332 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 16:28:11.101  INFO 16332 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:28:11.164  INFO 16332 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.505 seconds (JVM running for 6.072)
2022-03-02 16:28:27.089  INFO 16332 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 16:28:27.089  INFO 16332 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 16:28:27.091  INFO 16332 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 16:28:40.933  INFO 16332 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:350143}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:28:41.022 ERROR 16332 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 16:33:10.751  INFO 16332 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:38:10.767  INFO 16332 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:39:27.636  INFO 16332 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 16:39:27.636  INFO 16332 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646228367636, current=DOWN, previous=UP]
2022-03-02 16:39:27.637  INFO 16332 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:39:27.642  INFO 16332 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:39:27.846  INFO 16332 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 16:39:30.853  INFO 16332 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 16:39:30.858  INFO 16332 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 16:39:30.863  INFO 16332 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 16:40:56.236  INFO 15524 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 15524 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 16:40:56.238  INFO 15524 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 16:40:57.381  INFO 15524 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 16:40:57.551  INFO 15524 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 164 ms. Found 4 MongoDB repository interfaces.
2022-03-02 16:40:57.842  INFO 15524 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 16:40:58.312  INFO 15524 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 16:40:58.322  INFO 15524 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 16:40:58.323  INFO 15524 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 16:40:58.456  INFO 15524 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 16:40:58.456  INFO 15524 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2160 ms
2022-03-02 16:40:58.932  INFO 15524 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 16:40:59.009  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:40:59.038  WARN 15524 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:40:59.049  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:40:59.050  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:40:59.204  WARN 15524 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:40:59.562  INFO 15524 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:40:59.662  INFO 15524 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:40:59.780  INFO 15524 --- [cluster-rtt-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:345229}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.781  INFO 15524 --- [cluster-rtt-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:346020}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.780  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350329}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.781  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:345229}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.781  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=304001300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 16:40:49 MSK 2022, lastUpdateTimeNanos=24075117740200}
2022-03-02 16:40:59.782  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=303312000, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 16:40:49 MSK 2022, lastUpdateTimeNanos=24075120186700}
2022-03-02 16:40:59.783  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:346020}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.783  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=305718100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 16:40:49 MSK 2022, lastUpdateTimeNanos=24075118349500}
2022-03-02 16:40:59.784  INFO 15524 --- [cluster-rtt-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350329}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.786  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.786  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.786  INFO 15524 --- [cluster-ClusterId{value='621f73eaf6f9f91145470802', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:40:59.926  INFO 15524 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 16:40:59.999  WARN 15524 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 16:41:00.504  INFO 15524 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 16:41:00.565  WARN 15524 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 16:41:00.573  INFO 15524 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 16:41:00.608  INFO 15524 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 16:41:00.692  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 16:41:00.698  INFO 15524 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:41:00.729  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 16:41:00.729  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 16:41:00.730  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 16:41:00.730  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 16:41:00.730  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 16:41:00.730  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 16:41:00.730  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 16:41:01.002  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 16:41:01.009  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 16:41:01.015  INFO 15524 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 16:41:01.020  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646228461019 with initial instances count: 2
2022-03-02 16:41:01.021  INFO 15524 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 16:41:01.022  INFO 15524 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646228461022, current=UP, previous=STARTING]
2022-03-02 16:41:01.024  INFO 15524 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:41:01.044  INFO 15524 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 16:41:01.045  INFO 15524 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 16:41:01.071  INFO 15524 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:41:01.130  INFO 15524 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.611 seconds (JVM running for 6.259)
2022-03-02 16:41:21.776  INFO 15524 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 16:41:21.777  INFO 15524 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 16:41:21.778  INFO 15524 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2022-03-02 16:46:00.745  INFO 15524 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:47:51.202  INFO 15524 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 16:47:51.203  INFO 15524 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646228871202, current=DOWN, previous=UP]
2022-03-02 16:47:51.203  INFO 15524 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:47:51.207  INFO 15524 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:47:51.368  INFO 15524 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 16:47:54.373  INFO 15524 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 16:47:54.377  INFO 15524 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 16:47:54.383  INFO 15524 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 16:47:58.364  INFO 7996 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 7996 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 16:47:58.366  INFO 7996 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 16:47:59.446  INFO 7996 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 16:47:59.597  INFO 7996 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 145 ms. Found 4 MongoDB repository interfaces.
2022-03-02 16:47:59.894  INFO 7996 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 16:48:00.315  INFO 7996 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 16:48:00.325  INFO 7996 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 16:48:00.326  INFO 7996 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 16:48:00.474  INFO 7996 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 16:48:00.474  INFO 7996 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2047 ms
2022-03-02 16:48:00.923  INFO 7996 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 16:48:01.023  WARN 7996 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:48:01.024  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:48:01.071  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:48:01.073  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:48:01.199  WARN 7996 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:48:01.550  INFO 7996 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:48:01.659  INFO 7996 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:48:01.714  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:346127}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.715  INFO 7996 --- [cluster-rtt-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:350437}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.715  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:350437}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.715  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:345345}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.716  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=273240400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 16:48:00 MSK 2022, lastUpdateTimeNanos=24497048695500}
2022-03-02 16:48:01.715  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=299013500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 16:48:00 MSK 2022, lastUpdateTimeNanos=24497048298100}
2022-03-02 16:48:01.715  INFO 7996 --- [cluster-rtt-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:345345}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.717  INFO 7996 --- [cluster-rtt-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346127}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.715  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=298127900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 16:48:00 MSK 2022, lastUpdateTimeNanos=24497048298000}
2022-03-02 16:48:01.721  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.722  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.722  INFO 7996 --- [cluster-ClusterId{value='621f75900576505b57284b59', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:48:01.926  INFO 7996 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 16:48:01.996  WARN 7996 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 16:48:02.473  INFO 7996 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 16:48:02.528  WARN 7996 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 16:48:02.537  INFO 7996 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 16:48:02.591  INFO 7996 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 16:48:02.678  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 16:48:02.688  INFO 7996 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:48:02.733  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 16:48:02.734  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 16:48:02.734  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 16:48:02.734  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 16:48:02.734  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 16:48:02.734  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 16:48:02.734  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 16:48:03.038  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 16:48:03.044  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 16:48:03.051  INFO 7996 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 16:48:03.063  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646228883062 with initial instances count: 2
2022-03-02 16:48:03.064  INFO 7996 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 16:48:03.065  INFO 7996 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646228883065, current=UP, previous=STARTING]
2022-03-02 16:48:03.067  INFO 7996 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:48:03.086  INFO 7996 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 16:48:03.087  INFO 7996 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 16:48:03.108  INFO 7996 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:48:03.160  INFO 7996 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.429 seconds (JVM running for 5.933)
2022-03-02 16:48:12.519  INFO 7996 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 16:48:12.519  INFO 7996 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 16:48:12.521  INFO 7996 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2022-03-02 16:51:11.862  INFO 7996 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 16:51:11.863  INFO 7996 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646229071863, current=DOWN, previous=UP]
2022-03-02 16:51:11.863  INFO 7996 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:51:11.867  INFO 7996 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:51:21.985  INFO 7996 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 16:51:24.990  INFO 7996 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 16:51:24.995  INFO 7996 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 16:51:25.002  INFO 7996 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 16:52:51.005  INFO 13492 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 13492 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 16:52:51.007  INFO 13492 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 16:52:52.099  INFO 13492 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 16:52:52.252  INFO 13492 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 147 ms. Found 4 MongoDB repository interfaces.
2022-03-02 16:52:52.540  INFO 13492 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 16:52:52.978  INFO 13492 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 16:52:52.989  INFO 13492 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 16:52:52.989  INFO 13492 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 16:52:53.136  INFO 13492 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 16:52:53.137  INFO 13492 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2073 ms
2022-03-02 16:52:53.568  INFO 13492 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 16:52:53.654  WARN 13492 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:52:53.658  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:52:53.714  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:52:53.716  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 16:52:53.832  WARN 13492 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 16:52:54.161  INFO 13492 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:52:54.236  INFO 13492 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 16:52:54.424  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:345421}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.424  INFO 13492 --- [cluster-rtt-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350520}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.425  INFO 13492 --- [cluster-rtt-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:346206}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.424  INFO 13492 --- [cluster-rtt-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:345421}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.425  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=295380900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 16:52:50 MSK 2022, lastUpdateTimeNanos=24789761736800}
2022-03-02 16:52:54.424  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:346206}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.425  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:350518}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.425  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=298941300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 16:52:50 MSK 2022, lastUpdateTimeNanos=24789762734400}
2022-03-02 16:52:54.425  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=298397800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 16:52:50 MSK 2022, lastUpdateTimeNanos=24789762191100}
2022-03-02 16:52:54.428  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.428  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.428  INFO 13492 --- [cluster-ClusterId{value='621f76b51312fb613e494a25', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:52:54.525  INFO 13492 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 16:52:54.597  WARN 13492 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 16:52:55.087  INFO 13492 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 16:52:55.153  WARN 13492 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 16:52:55.162  INFO 13492 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 16:52:55.211  INFO 13492 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 16:52:55.292  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 16:52:55.298  INFO 13492 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 16:52:55.330  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 16:52:55.613  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 16:52:55.620  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 16:52:55.626  INFO 13492 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 16:52:55.638  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646229175637 with initial instances count: 2
2022-03-02 16:52:55.640  INFO 13492 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 16:52:55.641  INFO 13492 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646229175641, current=UP, previous=STARTING]
2022-03-02 16:52:55.642  INFO 13492 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 16:52:55.661  INFO 13492 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 16:52:55.662  INFO 13492 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 16:52:55.687  INFO 13492 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 16:52:55.744  INFO 13492 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.378 seconds (JVM running for 5.896)
2022-03-02 16:53:01.434  INFO 13492 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 16:53:01.435  INFO 13492 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 16:53:01.436  INFO 13492 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2022-03-02 16:53:10.233  INFO 13492 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:350513}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 16:53:23.882 ERROR 13492 --- [http-nio-9001-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 16:57:55.343  INFO 13492 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:02:55.348  INFO 13492 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:03:59.493  INFO 13492 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:03:59.494  INFO 13492 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646229839494, current=DOWN, previous=UP]
2022-03-02 17:03:59.494  INFO 13492 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:03:59.498  INFO 13492 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:03:59.699  INFO 13492 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:04:02.714  INFO 13492 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:04:02.719  INFO 13492 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:04:02.725  INFO 13492 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:05:23.519  INFO 32 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 32 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:05:23.522  INFO 32 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:05:24.622  INFO 32 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:05:24.771  INFO 32 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 142 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:05:25.076  INFO 32 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 17:05:25.519  INFO 32 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:05:25.528  INFO 32 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:05:25.528  INFO 32 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:05:25.661  INFO 32 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:05:25.662  INFO 32 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2084 ms
2022-03-02 17:05:26.065  INFO 32 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:05:26.163  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:05:26.174  WARN 32 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:05:26.201  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:05:26.203  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:05:26.342  WARN 32 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:05:26.693  INFO 32 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:05:26.788  INFO 32 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:05:26.895  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:350747}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.896  INFO 32 --- [cluster-rtt-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350747}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.896  INFO 32 --- [cluster-rtt-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:345657}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.896  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:346439}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.896  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=303211800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 17:05:23 MSK 2022, lastUpdateTimeNanos=25542233390000}
2022-03-02 17:05:26.896  INFO 32 --- [cluster-rtt-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:346439}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.896  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:345657}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.896  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=304472700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 17:05:23 MSK 2022, lastUpdateTimeNanos=25542234651000}
2022-03-02 17:05:26.897  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=300731100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 17:05:23 MSK 2022, lastUpdateTimeNanos=25542234719700}
2022-03-02 17:05:26.900  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.900  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:05:26.900  INFO 32 --- [cluster-ClusterId{value='621f79a6d66be5201d822290', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:05:27.066  INFO 32 --- [main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [public/index.html]
2022-03-02 17:05:27.139  WARN 32 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 17:05:27.618  INFO 32 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 17:05:27.688  WARN 32 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 17:05:27.698  INFO 32 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 17:05:27.739  INFO 32 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 17:05:27.830  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 17:05:27.838  INFO 32 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:05:27.878  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 17:05:27.878  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 17:05:27.878  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 17:05:27.878  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 17:05:27.878  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 17:05:27.878  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 17:05:27.879  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 17:05:28.173  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 17:05:28.179  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 17:05:28.185  INFO 32 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 17:05:28.197  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646229928196 with initial instances count: 3
2022-03-02 17:05:28.198  INFO 32 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 17:05:28.199  INFO 32 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646229928199, current=UP, previous=STARTING]
2022-03-02 17:05:28.200  INFO 32 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:05:28.222  INFO 32 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 17:05:28.223  INFO 32 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 17:05:28.246  INFO 32 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:05:28.305  INFO 32 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.424 seconds (JVM running for 5.927)
2022-03-02 17:05:39.130  INFO 32 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 17:05:39.131  INFO 32 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 17:05:39.133  INFO 32 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 17:05:42.951  INFO 32 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:350736}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:06:01.301 ERROR 32 --- [http-nio-9001-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 17:10:27.886  INFO 32 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:14:00.409  INFO 32 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:14:00.409  INFO 32 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646230440409, current=DOWN, previous=UP]
2022-03-02 17:14:00.409  INFO 32 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:14:00.413  INFO 32 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:14:00.611  INFO 32 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:14:03.622  INFO 32 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:14:03.627  INFO 32 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:14:03.632  INFO 32 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:14:56.477  INFO 3448 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 3448 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:14:56.479  INFO 3448 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:14:57.585  INFO 3448 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:14:57.740  INFO 3448 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 149 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:14:58.016  INFO 3448 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 17:14:58.435  INFO 3448 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:14:58.442  INFO 3448 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:14:58.443  INFO 3448 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:14:58.580  INFO 3448 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:14:58.580  INFO 3448 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2046 ms
2022-03-02 17:14:59.032  INFO 3448 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:14:59.125  WARN 3448 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:14:59.167  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:14:59.209  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:14:59.211  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:14:59.288  WARN 3448 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:14:59.658  INFO 3448 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:14:59.741  INFO 3448 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:14:59.880  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350914}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.881  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=230669200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 17:14:45 MSK 2022, lastUpdateTimeNanos=26115217167400}
2022-03-02 17:14:59.882  INFO 3448 --- [cluster-rtt-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:345811}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.882  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346603}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.882  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=306519000, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 17:14:45 MSK 2022, lastUpdateTimeNanos=26115221409700}
2022-03-02 17:14:59.883  INFO 3448 --- [cluster-rtt-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:346603}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.885  INFO 3448 --- [cluster-rtt-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:350914}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.885  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.885  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:345811}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.885  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.885  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:14:59.885  INFO 3448 --- [cluster-ClusterId{value='621f7be3c8b3853dc3e6b448', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=307310300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 17:14:45 MSK 2022, lastUpdateTimeNanos=26115224429600}
2022-03-02 17:15:00.104  WARN 3448 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 17:15:00.577  INFO 3448 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 17:15:00.627  WARN 3448 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 17:15:00.636  INFO 3448 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 17:15:00.670  INFO 3448 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 17:15:00.759  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 17:15:00.767  INFO 3448 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:15:00.799  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 17:15:00.799  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 17:15:00.799  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 17:15:00.799  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 17:15:00.799  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 17:15:00.799  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 17:15:00.800  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 17:15:01.087  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 17:15:01.094  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 17:15:01.099  INFO 3448 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 17:15:01.112  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646230501111 with initial instances count: 2
2022-03-02 17:15:01.115  INFO 3448 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 17:15:01.116  INFO 3448 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646230501116, current=UP, previous=STARTING]
2022-03-02 17:15:01.118  INFO 3448 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:15:01.137  INFO 3448 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 17:15:01.138  INFO 3448 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 17:15:01.161  INFO 3448 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:15:01.226  INFO 3448 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.468 seconds (JVM running for 6.258)
2022-03-02 17:15:53.896  INFO 3448 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 17:15:53.896  INFO 3448 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 17:15:53.898  INFO 3448 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 17:15:56.328  INFO 3448 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:350913}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:15:59.647 ERROR 3448 --- [http-nio-9001-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.NoUserFoundException: User not found] with root cause

ru.otus.spring.exception.NoUserFoundException: User not found
	at ru.otus.spring.service.UserServiceImpl.lambda$getUserByPhone$1(UserServiceImpl.java:41) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at ru.otus.spring.service.UserServiceImpl.getUserByPhone(UserServiceImpl.java:41) ~[classes/:na]
	at ru.otus.spring.rest.UserController.getUserByPhone(UserController.java:25) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 17:20:00.807  INFO 3448 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:21:22.063  INFO 3448 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:21:22.063  INFO 3448 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646230882063, current=DOWN, previous=UP]
2022-03-02 17:21:22.064  INFO 3448 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:21:22.068  INFO 3448 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:21:22.271  INFO 3448 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:21:25.284  INFO 3448 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:21:25.288  INFO 3448 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:21:25.294  INFO 3448 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:21:34.522  INFO 9020 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 9020 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:21:34.525  INFO 9020 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:21:35.599  INFO 9020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:21:35.752  INFO 9020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 148 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:21:36.032  INFO 9020 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 17:21:36.475  INFO 9020 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:21:36.485  INFO 9020 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:21:36.485  INFO 9020 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:21:36.625  INFO 9020 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:21:36.625  INFO 9020 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2039 ms
2022-03-02 17:21:37.054  INFO 9020 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:21:37.149  WARN 9020 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:21:37.175  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:21:37.225  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:21:37.226  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:21:37.321  WARN 9020 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:21:37.658  INFO 9020 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:21:37.732  INFO 9020 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:21:37.915  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346710}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.915  INFO 9020 --- [cluster-rtt-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:351010}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.916  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:351010}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.916  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=277959500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 17:21:32 MSK 2022, lastUpdateTimeNanos=26513253470500}
2022-03-02 17:21:37.916  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=277404900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 17:21:32 MSK 2022, lastUpdateTimeNanos=26513252669500}
2022-03-02 17:21:37.915  INFO 9020 --- [cluster-rtt-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:346710}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.915  INFO 9020 --- [cluster-rtt-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:345921}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.918  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:345921}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.919  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=309213400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 17:21:32 MSK 2022, lastUpdateTimeNanos=26513257555700}
2022-03-02 17:21:37.919  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.919  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:21:37.919  INFO 9020 --- [cluster-ClusterId{value='621f7d71855fc803e802f750', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:21:38.110  WARN 9020 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 17:21:38.592  INFO 9020 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 17:21:38.652  WARN 9020 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 17:21:38.659  INFO 9020 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 17:21:38.693  INFO 9020 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 17:21:38.776  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 17:21:38.783  INFO 9020 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:21:38.814  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 17:21:38.814  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 17:21:38.814  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 17:21:38.814  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 17:21:38.814  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 17:21:38.815  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 17:21:38.815  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 17:21:39.093  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 17:21:39.101  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 17:21:39.111  INFO 9020 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 17:21:39.127  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646230899126 with initial instances count: 2
2022-03-02 17:21:39.130  INFO 9020 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 17:21:39.131  INFO 9020 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646230899131, current=UP, previous=STARTING]
2022-03-02 17:21:39.133  INFO 9020 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:21:39.154  INFO 9020 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 17:21:39.155  INFO 9020 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 17:21:39.175  INFO 9020 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:21:39.234  INFO 9020 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.449 seconds (JVM running for 6.082)
2022-03-02 17:21:46.127  INFO 9020 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 17:21:46.127  INFO 9020 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 17:21:46.129  INFO 9020 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 17:21:46.524  INFO 9020 --- [http-nio-9001-exec-1] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:351009}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:24:23.946  INFO 9020 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:24:23.947  INFO 9020 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646231063947, current=DOWN, previous=UP]
2022-03-02 17:24:23.947  INFO 9020 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:24:23.951  INFO 9020 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:24:24.149  INFO 9020 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:24:27.155  INFO 9020 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:24:27.159  INFO 9020 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:24:27.164  INFO 9020 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:24:46.888  INFO 11652 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 11652 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:24:46.890  INFO 11652 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:24:47.996  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:24:48.141  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 139 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:24:48.424  INFO 11652 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=db2205d7-a4aa-304b-a8a9-60dce1335e7c
2022-03-02 17:24:48.876  INFO 11652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:24:48.894  INFO 11652 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:24:48.895  INFO 11652 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:24:49.029  INFO 11652 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:24:49.030  INFO 11652 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2082 ms
2022-03-02 17:24:49.461  INFO 11652 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:24:49.557  WARN 11652 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:24:49.574  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:24:49.633  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:24:49.635  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:24:49.751  WARN 11652 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:24:50.114  INFO 11652 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:24:50.191  INFO 11652 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:24:50.370  INFO 11652 --- [cluster-rtt-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:345971}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.371  INFO 11652 --- [cluster-rtt-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:351073}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.372  INFO 11652 --- [cluster-rtt-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:346758}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.372  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:351073}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.373  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:345971}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.373  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=330259500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 17:24:46 MSK 2022, lastUpdateTimeNanos=26705706949600}
2022-03-02 17:24:50.373  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=329158200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 17:24:46 MSK 2022, lastUpdateTimeNanos=26705707481700}
2022-03-02 17:24:50.375  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346758}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.375  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=330050700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 17:24:46 MSK 2022, lastUpdateTimeNanos=26705706413000}
2022-03-02 17:24:50.377  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.377  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.377  INFO 11652 --- [cluster-ClusterId{value='621f7e315adf17484a6e6026', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:24:50.600  WARN 11652 --- [main] ion$DefaultTemplateResolverConfiguration : Cannot find template location: classpath:/templates/ (please add some templates or check your Thymeleaf configuration)
2022-03-02 17:24:51.107  INFO 11652 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 17:24:51.171  WARN 11652 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 17:24:51.180  INFO 11652 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 17:24:51.219  INFO 11652 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 17:24:51.307  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 17:24:51.315  INFO 11652 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:24:51.350  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 17:24:51.350  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 17:24:51.350  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 17:24:51.350  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 17:24:51.350  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 17:24:51.351  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 17:24:51.351  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 17:24:51.647  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 17:24:51.652  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 17:24:51.656  INFO 11652 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 17:24:51.662  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646231091661 with initial instances count: 2
2022-03-02 17:24:51.664  INFO 11652 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 17:24:51.664  INFO 11652 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646231091664, current=UP, previous=STARTING]
2022-03-02 17:24:51.666  INFO 11652 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:24:51.687  INFO 11652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 17:24:51.688  INFO 11652 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 17:24:51.706  INFO 11652 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:24:51.762  INFO 11652 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.532 seconds (JVM running for 6.065)
2022-03-02 17:26:31.164  INFO 11652 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:26:31.165  INFO 11652 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646231191165, current=DOWN, previous=UP]
2022-03-02 17:26:31.165  INFO 11652 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:26:31.169  INFO 11652 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:26:31.326  INFO 11652 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:26:34.329  INFO 11652 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:26:34.334  INFO 11652 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:26:34.339  INFO 11652 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:47:05.269  INFO 17252 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 17252 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:47:05.272  INFO 17252 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:47:06.462  INFO 17252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:47:06.611  INFO 17252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 144 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:47:06.912  INFO 17252 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5d1c9bad-47af-34f8-88aa-875b55c039f1
2022-03-02 17:47:07.424  INFO 17252 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:47:07.437  INFO 17252 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:47:07.438  INFO 17252 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:47:07.589  INFO 17252 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:47:07.590  INFO 17252 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2257 ms
2022-03-02 17:47:08.050  INFO 17252 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:47:08.134  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:47:08.154  WARN 17252 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:47:08.169  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:47:08.170  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:47:08.317  WARN 17252 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:47:08.739  INFO 17252 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:47:08.834  INFO 17252 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:47:08.877  INFO 17252 --- [cluster-rtt-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:347079}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.877  INFO 17252 --- [cluster-rtt-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:351391}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.877  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:346294}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.877  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:351391}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.878  INFO 17252 --- [cluster-rtt-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346294}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.878  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=326995700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 17:47:08 MSK 2022, lastUpdateTimeNanos=28044214812100}
2022-03-02 17:47:08.877  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:347079}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.878  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=325461800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 17:47:08 MSK 2022, lastUpdateTimeNanos=28044215135200}
2022-03-02 17:47:08.878  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=323729200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 17:47:08 MSK 2022, lastUpdateTimeNanos=28044215192900}
2022-03-02 17:47:08.881  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.882  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:47:08.882  INFO 17252 --- [cluster-ClusterId{value='621f836cf9673534af8d01e1', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:47:09.031  INFO 17252 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 17:47:09.074  INFO 17252 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a890fdd, org.springframework.security.web.context.SecurityContextPersistenceFilter@336d28a1, org.springframework.security.web.header.HeaderWriterFilter@4491eaeb, org.springframework.security.web.authentication.logout.LogoutFilter@37c87fcc, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@734cf881, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5891b7c5, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56299b0e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@42e202d7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1686ed85, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3ca278bc, org.springframework.security.web.session.SessionManagementFilter@5f3ddc86, org.springframework.security.web.access.ExceptionTranslationFilter@714bffd5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@15d58530]
2022-03-02 17:47:09.924  INFO 17252 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 17:47:09.981  WARN 17252 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 17:47:09.992  INFO 17252 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 17:47:10.042  INFO 17252 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 17:47:10.125  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 17:47:10.131  INFO 17252 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:47:10.164  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 17:47:10.164  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 17:47:10.165  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 17:47:10.165  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 17:47:10.165  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 17:47:10.165  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 17:47:10.165  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 17:47:10.478  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 17:47:10.486  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 17:47:10.491  INFO 17252 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 17:47:10.504  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646232430503 with initial instances count: 2
2022-03-02 17:47:10.508  INFO 17252 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 17:47:10.509  INFO 17252 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646232430509, current=UP, previous=STARTING]
2022-03-02 17:47:10.512  INFO 17252 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:47:10.538  INFO 17252 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 17:47:10.539  INFO 17252 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 17:47:10.567  INFO 17252 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:47:10.640  INFO 17252 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.025 seconds (JVM running for 6.558)
2022-03-02 17:47:17.415  INFO 17252 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 17:47:17.415  INFO 17252 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 17:47:17.418  INFO 17252 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 17:47:50.128  INFO 17252 --- [http-nio-9001-exec-8] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:351390}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:47:50.231  WARN 17252 --- [http-nio-9001-exec-8] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt
2022-03-02 17:48:12.970  WARN 17252 --- [http-nio-9001-exec-2] o.s.s.c.bcrypt.BCryptPasswordEncoder     : Encoded password does not look like BCrypt
2022-03-02 17:48:43.164  INFO 17252 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:48:43.164  INFO 17252 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646232523164, current=DOWN, previous=UP]
2022-03-02 17:48:43.165  INFO 17252 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:48:43.169  INFO 17252 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:48:43.374  INFO 17252 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:48:46.383  INFO 17252 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:48:46.387  INFO 17252 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:48:46.396  INFO 17252 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:50:00.244  INFO 7856 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 7856 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:50:00.246  INFO 7856 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:50:01.429  INFO 7856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:50:01.584  INFO 7856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 148 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:50:01.897  INFO 7856 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5d1c9bad-47af-34f8-88aa-875b55c039f1
2022-03-02 17:50:02.441  INFO 7856 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:50:02.454  INFO 7856 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:50:02.455  INFO 7856 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:50:02.597  INFO 7856 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:50:02.597  INFO 7856 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2294 ms
2022-03-02 17:50:03.097  INFO 7856 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:50:03.197  WARN 7856 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:50:03.217  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:50:03.258  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:50:03.260  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:50:03.378  WARN 7856 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:50:03.870  INFO 7856 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:50:03.946  INFO 7856 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 17:50:03.964  INFO 7856 --- [cluster-rtt-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:351347}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.965  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:351347}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.966  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:347130}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.966  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=316003300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 17:49:46 MSK 2022, lastUpdateTimeNanos=28219302631800}
2022-03-02 17:50:03.966  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=322578100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 17:49:46 MSK 2022, lastUpdateTimeNanos=28219302633200}
2022-03-02 17:50:03.966  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346336}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.966  INFO 7856 --- [cluster-rtt-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:347130}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.965  INFO 7856 --- [cluster-rtt-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:346336}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.967  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=323444400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 17:49:46 MSK 2022, lastUpdateTimeNanos=28219306226800}
2022-03-02 17:50:03.970  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.970  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:50:03.970  INFO 7856 --- [cluster-ClusterId{value='621f841bb3594b4a0f615bdb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:50:04.156  INFO 7856 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 17:50:04.199  INFO 7856 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@65ef9a0a, org.springframework.security.web.context.SecurityContextPersistenceFilter@6bf0f70a, org.springframework.security.web.header.HeaderWriterFilter@3e01796a, org.springframework.security.web.authentication.logout.LogoutFilter@5891b7c5, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7bda01da, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@644947ee, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@25216999, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52d63b7e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@43ab0659, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77e6761f, org.springframework.security.web.session.SessionManagementFilter@e91facf, org.springframework.security.web.access.ExceptionTranslationFilter@7a62d697, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d31f14]
2022-03-02 17:50:05.050  INFO 7856 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 17:50:05.109  WARN 7856 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 17:50:05.120  INFO 7856 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 17:50:05.175  INFO 7856 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 17:50:05.256  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 17:50:05.264  INFO 7856 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 17:50:05.296  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 17:50:05.296  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 17:50:05.297  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 17:50:05.297  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 17:50:05.297  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 17:50:05.297  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 17:50:05.297  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 17:50:05.583  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 17:50:05.590  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 17:50:05.596  INFO 7856 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 17:50:05.610  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646232605609 with initial instances count: 2
2022-03-02 17:50:05.612  INFO 7856 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 17:50:05.613  INFO 7856 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646232605613, current=UP, previous=STARTING]
2022-03-02 17:50:05.614  INFO 7856 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:50:05.635  INFO 7856 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 17:50:05.636  INFO 7856 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 17:50:05.659  INFO 7856 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:50:05.717  INFO 7856 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.07 seconds (JVM running for 6.598)
2022-03-02 17:51:23.627  INFO 7856 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 17:51:23.627  INFO 7856 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 17:51:23.629  INFO 7856 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2022-03-02 17:51:24.208  INFO 7856 --- [http-nio-9001-exec-1] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:351447}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 17:53:22.006  INFO 7856 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 17:53:22.006  INFO 7856 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646232802006, current=DOWN, previous=UP]
2022-03-02 17:53:22.006  INFO 7856 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 17:53:22.011  INFO 7856 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 17:53:22.216  INFO 7856 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 17:53:25.234  INFO 7856 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 17:53:25.238  INFO 7856 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 17:53:25.242  INFO 7856 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 17:53:31.938  INFO 18180 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 18180 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:53:31.941  INFO 18180 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:53:33.189  INFO 18180 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:53:33.360  INFO 18180 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 165 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:53:33.659  INFO 18180 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5d1c9bad-47af-34f8-88aa-875b55c039f1
2022-03-02 17:53:34.133  INFO 18180 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:53:34.144  INFO 18180 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:53:34.144  INFO 18180 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:53:34.282  INFO 18180 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:53:34.282  INFO 18180 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2274 ms
2022-03-02 17:53:34.739  INFO 18180 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:53:34.854  INFO 18180 --- [cluster-ClusterId{value='621f84ee1344e029c2cc1f4b', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:53:34.855  WARN 18180 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:53:34.906  INFO 18180 --- [cluster-ClusterId{value='621f84ee1344e029c2cc1f4b', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:53:34.907  INFO 18180 --- [cluster-ClusterId{value='621f84ee1344e029c2cc1f4b', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:53:35.075  WARN 18180 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:53:35.400  WARN 18180 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cardController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\CardController.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\UserServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfiguration': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'userServiceImpl': Requested bean is currently in creation: Is there an unresolvable circular reference?
2022-03-02 17:53:35.409  INFO 18180 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 17:53:35.430  INFO 18180 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 17:53:35.452 ERROR 18180 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   cardController defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\CardController.class]

|  userServiceImpl defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\UserServiceImpl.class]
     
|  securityConfiguration (field private ru.otus.spring.service.UserService ru.otus.spring.security.config.SecurityConfiguration.userService)



Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2022-03-02 17:57:00.607  INFO 7048 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 7048 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 17:57:00.609  INFO 7048 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 17:57:01.738  INFO 7048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 17:57:01.916  INFO 7048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 170 ms. Found 4 MongoDB repository interfaces.
2022-03-02 17:57:02.204  INFO 7048 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5d1c9bad-47af-34f8-88aa-875b55c039f1
2022-03-02 17:57:02.709  INFO 7048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 17:57:02.721  INFO 7048 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 17:57:02.721  INFO 7048 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 17:57:02.866  INFO 7048 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 17:57:02.866  INFO 7048 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2206 ms
2022-03-02 17:57:03.362  INFO 7048 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 17:57:03.460  WARN 7048 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:57:03.462  INFO 7048 --- [cluster-ClusterId{value='621f85bf97d74a2998211d7f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:57:03.501  INFO 7048 --- [cluster-ClusterId{value='621f85bf97d74a2998211d7f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:57:03.503  INFO 7048 --- [cluster-ClusterId{value='621f85bf97d74a2998211d7f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 17:57:03.637  WARN 7048 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 17:57:03.907  WARN 7048 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cardController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\CardController.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\UserServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfiguration': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'userServiceImpl': Requested bean is currently in creation: Is there an unresolvable circular reference?
2022-03-02 17:57:03.928  INFO 7048 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 17:57:03.960  INFO 7048 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 17:57:03.982 ERROR 7048 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   cardController defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\CardController.class]

|  userServiceImpl defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\UserServiceImpl.class]
     
|  securityConfiguration (field private ru.otus.spring.service.UserService ru.otus.spring.security.config.SecurityConfiguration.userService)



Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2022-03-02 18:05:19.530  INFO 8724 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 8724 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:05:19.532  INFO 8724 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:05:20.682  INFO 8724 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:05:20.845  INFO 8724 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 158 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:05:21.246  INFO 8724 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=5d1c9bad-47af-34f8-88aa-875b55c039f1
2022-03-02 18:05:21.794  INFO 8724 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:05:21.806  INFO 8724 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:05:21.807  INFO 8724 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:05:21.939  INFO 8724 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:05:21.939  INFO 8724 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2350 ms
2022-03-02 18:05:22.408  INFO 8724 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:05:22.517  WARN 8724 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:05:22.529  INFO 8724 --- [cluster-ClusterId{value='621f87b2082f88735f279225', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:05:22.577  INFO 8724 --- [cluster-ClusterId{value='621f87b2082f88735f279225', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:05:22.580  INFO 8724 --- [cluster-ClusterId{value='621f87b2082f88735f279225', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:05:22.722  WARN 8724 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:05:23.044  WARN 8724 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cardController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\CardController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cardServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\CardServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\UserServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfiguration': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'userServiceImpl': Requested bean is currently in creation: Is there an unresolvable circular reference?
2022-03-02 18:05:23.051  INFO 8724 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 18:05:23.073  INFO 8724 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 18:05:23.099 ERROR 8724 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   cardController defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\CardController.class]
      
   cardServiceImpl defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\CardServiceImpl.class]

|  userServiceImpl defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\UserServiceImpl.class]
     
|  securityConfiguration (field private ru.otus.spring.service.UserService ru.otus.spring.security.config.SecurityConfiguration.userService)



Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2022-03-02 18:19:25.825  INFO 19444 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 19444 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:19:25.827  INFO 19444 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:19:27.002  INFO 19444 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:19:27.150  INFO 19444 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 142 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:19:27.444  INFO 19444 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 18:19:27.952  INFO 19444 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:19:27.964  INFO 19444 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:19:27.964  INFO 19444 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:19:28.109  INFO 19444 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:19:28.109  INFO 19444 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2220 ms
2022-03-02 18:19:28.602  INFO 19444 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:19:28.699  WARN 19444 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:19:28.726  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:19:28.762  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:19:28.764  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:19:28.867  WARN 19444 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:19:29.249  INFO 19444 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:19:29.321  INFO 19444 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:351868}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-rtt-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:346771}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-rtt-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:351868}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=289090500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 18:19:25 MSK 2022, lastUpdateTimeNanos=29984798917100}
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:347558}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:346771}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.462  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=289154400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 18:19:25 MSK 2022, lastUpdateTimeNanos=29984798980700}
2022-03-02 18:19:29.461  INFO 19444 --- [cluster-rtt-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:347558}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.462  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=290516900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 18:19:25 MSK 2022, lastUpdateTimeNanos=29984800808100}
2022-03-02 18:19:29.464  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.465  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.465  INFO 19444 --- [cluster-ClusterId{value='621f8b00f9b17f001475e65e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:19:29.538  INFO 19444 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 18:19:29.584  INFO 19444 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d31f14, org.springframework.security.web.context.SecurityContextPersistenceFilter@3e01796a, org.springframework.security.web.header.HeaderWriterFilter@516c20de, org.springframework.security.web.authentication.logout.LogoutFilter@62158991, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@4ef8090b, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1827fc4e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@404009df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e91facf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74830d73, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75e4fe3c, org.springframework.security.web.session.SessionManagementFilter@7a62d697, org.springframework.security.web.access.ExceptionTranslationFilter@25e6c22a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@58021c3c]
2022-03-02 18:19:30.432  INFO 19444 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 18:19:30.498  WARN 19444 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 18:19:30.506  INFO 19444 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 18:19:30.558  INFO 19444 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 18:19:30.642  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 18:19:30.650  INFO 19444 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:19:30.683  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 18:19:30.683  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 18:19:30.683  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 18:19:30.683  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 18:19:30.683  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 18:19:30.683  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 18:19:30.684  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 18:19:30.985  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 18:19:30.991  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 18:19:30.997  INFO 19444 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 18:19:31.008  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646234371007 with initial instances count: 2
2022-03-02 18:19:31.011  INFO 19444 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 18:19:31.012  INFO 19444 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646234371012, current=UP, previous=STARTING]
2022-03-02 18:19:31.014  INFO 19444 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:19:31.031  INFO 19444 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 18:19:31.032  INFO 19444 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 18:19:31.053  INFO 19444 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:19:31.115  INFO 19444 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.943 seconds (JVM running for 6.466)
2022-03-02 18:19:49.471  INFO 19444 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 18:19:49.472  INFO 19444 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646234389472, current=DOWN, previous=UP]
2022-03-02 18:19:49.472  INFO 19444 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:19:49.475  INFO 19444 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:19:59.584  INFO 19444 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 18:20:02.585  WARN 19444 --- [DiscoveryClient-0] c.netflix.discovery.TimedSupervisorTask  : task supervisor shutting down, can't accept the task
2022-03-02 18:20:02.592  INFO 19444 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 18:20:02.596  INFO 19444 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 18:20:02.604  INFO 19444 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 18:20:08.164  INFO 17196 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 17196 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:20:08.167  INFO 17196 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:20:09.327  INFO 17196 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:20:09.476  INFO 17196 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 144 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:20:09.767  INFO 17196 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 18:20:10.314  INFO 17196 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:20:10.328  INFO 17196 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:20:10.328  INFO 17196 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:20:10.498  INFO 17196 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:20:10.498  INFO 17196 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2258 ms
2022-03-02 18:20:11.004  INFO 17196 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:20:11.090  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:20:11.123  WARN 17196 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:20:11.132  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:20:11.134  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:20:11.300  WARN 17196 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:20:11.633  INFO 17196 --- [cluster-rtt-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:351870}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.633  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:351870}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.634  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=282220100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 18:20:05 MSK 2022, lastUpdateTimeNanos=30026970466000}
2022-03-02 18:20:11.637  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.638  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.639  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.651  INFO 17196 --- [cluster-rtt-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:346777}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.656  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:347571}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.657  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=305865900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 18:20:05 MSK 2022, lastUpdateTimeNanos=30026995167600}
2022-03-02 18:20:11.660  INFO 17196 --- [cluster-rtt-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:347571}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.681  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:346777}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:20:11.682  INFO 17196 --- [cluster-ClusterId{value='621f8b2a01d06c117fed72de', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=313238400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 18:20:05 MSK 2022, lastUpdateTimeNanos=30027006687500}
2022-03-02 18:20:11.836  INFO 17196 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:20:11.910  INFO 17196 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:20:12.134  INFO 17196 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 18:20:12.186  INFO 17196 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d58dc61, org.springframework.security.web.context.SecurityContextPersistenceFilter@430d3021, org.springframework.security.web.header.HeaderWriterFilter@4c2bea52, org.springframework.security.web.authentication.logout.LogoutFilter@6e49b011, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2152fde5, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5a7e81, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@32328dc4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3220c28, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@54941dfd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17df689e, org.springframework.security.web.session.SessionManagementFilter@6ebbc06, org.springframework.security.web.access.ExceptionTranslationFilter@3dc55719, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@11adab6d]
2022-03-02 18:20:13.140  INFO 17196 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 18:20:13.213  WARN 17196 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 18:20:13.222  INFO 17196 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 18:20:13.284  INFO 17196 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 18:20:13.382  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 18:20:13.390  INFO 17196 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:20:13.424  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 18:20:13.424  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 18:20:13.424  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 18:20:13.425  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 18:20:13.425  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 18:20:13.425  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 18:20:13.425  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 18:20:13.795  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 18:20:13.803  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 18:20:13.813  INFO 17196 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 18:20:13.833  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646234413832 with initial instances count: 3
2022-03-02 18:20:13.836  INFO 17196 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 18:20:13.837  INFO 17196 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646234413837, current=UP, previous=STARTING]
2022-03-02 18:20:13.841  INFO 17196 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:20:13.864  INFO 17196 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 18:20:13.865  INFO 17196 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 18:20:13.893  INFO 17196 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:20:13.963  INFO 17196 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.464 seconds (JVM running for 7.038)
2022-03-02 18:20:34.136  INFO 17196 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 18:20:34.136  INFO 17196 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 18:20:34.140  INFO 17196 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2022-03-02 18:20:34.646  INFO 17196 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:351895}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:22:14.266  INFO 17196 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 18:22:14.266  INFO 17196 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646234534266, current=DOWN, previous=UP]
2022-03-02 18:22:14.266  INFO 17196 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:22:14.269  INFO 17196 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:22:14.484  INFO 17196 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 18:22:17.503  INFO 17196 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 18:22:17.507  INFO 17196 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 18:22:17.512  INFO 17196 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 18:31:34.791  INFO 16340 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 16340 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:31:34.793  INFO 16340 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:31:35.988  INFO 16340 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:31:36.138  INFO 16340 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 144 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:31:36.431  INFO 16340 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 18:31:36.939  INFO 16340 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:31:36.949  INFO 16340 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:31:36.949  INFO 16340 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:31:37.088  INFO 16340 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:31:37.089  INFO 16340 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2236 ms
2022-03-02 18:31:37.569  INFO 16340 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:31:37.672  WARN 16340 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:31:37.676  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:31:37.719  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:31:37.720  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:31:37.848  WARN 16340 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:31:38.259  INFO 16340 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:31:38.348  INFO 16340 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:31:38.439  INFO 16340 --- [cluster-rtt-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:346945}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.439  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:346945}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.439  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:352038}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.440  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=297774300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 18:31:37 MSK 2022, lastUpdateTimeNanos=30713777115300}
2022-03-02 18:31:38.440  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=297774200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 18:31:37 MSK 2022, lastUpdateTimeNanos=30713777115300}
2022-03-02 18:31:38.440  INFO 16340 --- [cluster-rtt-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:352038}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.440  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:347741}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.440  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=297774100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 18:31:37 MSK 2022, lastUpdateTimeNanos=30713777115300}
2022-03-02 18:31:38.441  INFO 16340 --- [cluster-rtt-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:347741}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.443  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.444  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.444  INFO 16340 --- [cluster-ClusterId{value='621f8dd9068475347a86db3f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:31:38.563  INFO 16340 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 18:31:38.607  INFO 16340 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5604b85, org.springframework.security.web.context.SecurityContextPersistenceFilter@738a39cc, org.springframework.security.web.header.HeaderWriterFilter@71262020, org.springframework.security.web.authentication.logout.LogoutFilter@2e0652ab, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@351ede23, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@32c0fecc, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5df7a065, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@38e7860c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51141f64, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f45dfec, org.springframework.security.web.session.SessionManagementFilter@78e043e4, org.springframework.security.web.access.ExceptionTranslationFilter@6ac9b66b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@30a01dd8]
2022-03-02 18:31:39.467  INFO 16340 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 18:31:39.529  WARN 16340 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 18:31:39.539  INFO 16340 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 18:31:39.600  INFO 16340 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 18:31:39.687  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 18:31:39.695  INFO 16340 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:31:39.732  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 18:31:39.733  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 18:31:39.733  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 18:31:39.733  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 18:31:39.734  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 18:31:39.734  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 18:31:39.734  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 18:31:40.027  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 18:31:40.032  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 18:31:40.038  INFO 16340 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 18:31:40.051  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646235100050 with initial instances count: 2
2022-03-02 18:31:40.053  INFO 16340 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 18:31:40.054  INFO 16340 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235100054, current=UP, previous=STARTING]
2022-03-02 18:31:40.056  INFO 16340 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:31:40.077  INFO 16340 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 18:31:40.078  INFO 16340 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 18:31:40.096  INFO 16340 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:31:40.159  INFO 16340 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.005 seconds (JVM running for 6.529)
2022-03-02 18:32:23.798  INFO 16340 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 18:32:23.799  INFO 16340 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235143799, current=DOWN, previous=UP]
2022-03-02 18:32:23.799  INFO 16340 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:32:23.803  INFO 16340 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:32:23.951  INFO 16340 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 18:32:26.967  INFO 16340 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 18:32:26.971  INFO 16340 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 18:32:26.975  INFO 16340 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 18:32:30.777  INFO 10092 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 10092 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:32:30.779  INFO 10092 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:32:31.904  INFO 10092 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:32:32.052  INFO 10092 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 142 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:32:32.335  INFO 10092 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 18:32:32.835  INFO 10092 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:32:32.847  INFO 10092 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:32:32.847  INFO 10092 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:32:32.981  INFO 10092 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:32:32.981  INFO 10092 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2148 ms
2022-03-02 18:32:33.430  INFO 10092 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:32:33.525  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:32:33.539  WARN 10092 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:32:33.562  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:32:33.564  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:32:33.727  WARN 10092 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:352061}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-rtt-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:352061}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:346955}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:347749}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=244723400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 18:32:28 MSK 2022, lastUpdateTimeNanos=30769471988100}
2022-03-02 18:32:34.135  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=295803900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 18:32:28 MSK 2022, lastUpdateTimeNanos=30769472110400}
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-rtt-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:347749}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.134  INFO 10092 --- [cluster-rtt-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:346955}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.135  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=154153000, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 18:32:28 MSK 2022, lastUpdateTimeNanos=30769472684100}
2022-03-02 18:32:34.138  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.138  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.138  INFO 10092 --- [cluster-ClusterId{value='621f8e1188143f77b757507f', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:32:34.177  INFO 10092 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:32:34.241  INFO 10092 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:32:34.426  INFO 10092 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 18:32:34.461  INFO 10092 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f1fbc9f, org.springframework.security.web.context.SecurityContextPersistenceFilter@cf984d9, org.springframework.security.web.header.HeaderWriterFilter@58f290bc, org.springframework.security.web.authentication.logout.LogoutFilter@e706aa, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@77eb607e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5bde6148, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@10d4b573, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54941dfd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@341ccfd1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@50785f86, org.springframework.security.web.session.SessionManagementFilter@6ae42248, org.springframework.security.web.access.ExceptionTranslationFilter@50672905, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3e6acec2]
2022-03-02 18:32:35.307  INFO 10092 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 18:32:35.367  WARN 10092 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 18:32:35.376  INFO 10092 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 18:32:35.434  INFO 10092 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 18:32:35.520  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 18:32:35.528  INFO 10092 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:32:35.559  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 18:32:35.559  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 18:32:35.559  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 18:32:35.559  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 18:32:35.559  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 18:32:35.559  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 18:32:35.560  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 18:32:35.845  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 18:32:35.851  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 18:32:35.857  INFO 10092 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 18:32:35.869  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646235155868 with initial instances count: 2
2022-03-02 18:32:35.873  INFO 10092 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 18:32:35.873  INFO 10092 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235155873, current=UP, previous=STARTING]
2022-03-02 18:32:35.875  INFO 10092 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:32:35.896  INFO 10092 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 18:32:35.897  INFO 10092 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 18:32:35.919  INFO 10092 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:32:35.986  INFO 10092 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.868 seconds (JVM running for 6.388)
2022-03-02 18:32:52.224  INFO 10092 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 18:32:52.224  INFO 10092 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 18:32:52.227  INFO 10092 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 18:33:16.016  INFO 10092 --- [http-nio-9001-exec-5] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:352076}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:33:47.965  INFO 10092 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 18:33:47.966  INFO 10092 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235227966, current=DOWN, previous=UP]
2022-03-02 18:33:47.966  INFO 10092 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:33:47.972  INFO 10092 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:33:48.182  INFO 10092 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 18:33:51.199  INFO 10092 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 18:33:51.205  INFO 10092 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 18:33:51.215  INFO 10092 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 18:35:17.867  INFO 13632 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 13632 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:35:17.870  INFO 13632 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:35:19.002  INFO 13632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:35:19.158  INFO 13632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 149 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:35:19.456  INFO 13632 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 18:35:19.941  INFO 13632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:35:19.953  INFO 13632 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:35:19.953  INFO 13632 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:35:20.119  INFO 13632 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:35:20.119  INFO 13632 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2191 ms
2022-03-02 18:35:20.657  INFO 13632 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:35:20.752  WARN 13632 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:35:20.777  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:35:20.815  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:35:20.817  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:35:20.928  WARN 13632 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:35:21.351  INFO 13632 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:35:21.449  INFO 13632 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:35:21.500  INFO 13632 --- [cluster-rtt-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:347005}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.500  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:347005}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.500  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:352062}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.500  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=286547000, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 18:35:15 MSK 2022, lastUpdateTimeNanos=30936837684900}
2022-03-02 18:35:21.500  INFO 13632 --- [cluster-rtt-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:347795}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.501  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=308342700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 18:35:15 MSK 2022, lastUpdateTimeNanos=30936837684900}
2022-03-02 18:35:21.500  INFO 13632 --- [cluster-rtt-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:352062}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.501  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:347794}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.501  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=308730400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 18:35:15 MSK 2022, lastUpdateTimeNanos=30936838068200}
2022-03-02 18:35:21.504  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.504  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.504  INFO 13632 --- [cluster-ClusterId{value='621f8eb8121762683f0f7af0', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:35:21.630  INFO 13632 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 18:35:21.672  INFO 13632 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24b3f778, org.springframework.security.web.context.SecurityContextPersistenceFilter@62883f8a, org.springframework.security.web.header.HeaderWriterFilter@4345fd45, org.springframework.security.web.authentication.logout.LogoutFilter@2faf6e4a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@39f93225, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@25e6c22a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@164dea80, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6e49b011, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@e706aa, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4392362c, org.springframework.security.web.session.SessionManagementFilter@10d905c1, org.springframework.security.web.access.ExceptionTranslationFilter@67e11bda, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7c3c3d67]
2022-03-02 18:35:22.500  INFO 13632 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 18:35:22.557  WARN 13632 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 18:35:22.567  INFO 13632 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 18:35:22.622  INFO 13632 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 18:35:22.704  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 18:35:22.711  INFO 13632 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:35:22.744  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 18:35:22.744  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 18:35:22.744  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 18:35:22.744  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 18:35:22.745  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 18:35:22.745  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 18:35:22.745  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 18:35:23.022  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 18:35:23.029  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 18:35:23.035  INFO 13632 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 18:35:23.050  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646235323048 with initial instances count: 2
2022-03-02 18:35:23.052  INFO 13632 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 18:35:23.053  INFO 13632 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235323053, current=UP, previous=STARTING]
2022-03-02 18:35:23.055  INFO 13632 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:35:23.076  INFO 13632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 18:35:23.077  INFO 13632 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 18:35:23.098  INFO 13632 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:35:23.155  INFO 13632 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.935 seconds (JVM running for 6.485)
2022-03-02 18:35:27.748  INFO 13632 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 18:35:27.749  INFO 13632 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 18:35:27.752  INFO 13632 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 18:35:39.762  INFO 13632 --- [http-nio-9001-exec-3] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:352100}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:36:14.116  INFO 13632 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 18:36:14.117  INFO 13632 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235374117, current=DOWN, previous=UP]
2022-03-02 18:36:14.117  INFO 13632 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:36:14.121  INFO 13632 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:36:14.327  INFO 13632 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 18:36:17.353  INFO 13632 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 18:36:17.366  INFO 13632 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 18:36:17.372  INFO 13632 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 18:36:23.490  INFO 1708 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 1708 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 18:36:23.492  INFO 1708 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 18:36:24.653  INFO 1708 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 18:36:24.815  INFO 1708 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 156 ms. Found 4 MongoDB repository interfaces.
2022-03-02 18:36:25.120  INFO 1708 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 18:36:25.620  INFO 1708 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 18:36:25.631  INFO 1708 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 18:36:25.632  INFO 1708 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 18:36:25.773  INFO 1708 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 18:36:25.773  INFO 1708 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2226 ms
2022-03-02 18:36:26.290  INFO 1708 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 18:36:26.398  WARN 1708 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:36:26.419  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:36:26.458  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:36:26.459  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 18:36:26.567  WARN 1708 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 18:36:27.012  INFO 1708 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:36:27.120  INFO 1708 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 18:36:27.132  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:352136}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.132  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:347802}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.132  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:347026}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.132  INFO 1708 --- [cluster-rtt-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:347026}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.133  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=307555600, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 18:36:25 MSK 2022, lastUpdateTimeNanos=31002469414600}
2022-03-02 18:36:27.132  INFO 1708 --- [cluster-rtt-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:352136}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.133  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=291805200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 18:36:25 MSK 2022, lastUpdateTimeNanos=31002469172400}
2022-03-02 18:36:27.133  INFO 1708 --- [cluster-rtt-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:347802}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.133  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=308321800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 18:36:25 MSK 2022, lastUpdateTimeNanos=31002469525300}
2022-03-02 18:36:27.136  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.136  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.137  INFO 1708 --- [cluster-ClusterId{value='621f8efa9d1542147b519e02', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:36:27.331  INFO 1708 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 18:36:27.383  INFO 1708 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@39f93225, org.springframework.security.web.context.SecurityContextPersistenceFilter@5bde6148, org.springframework.security.web.header.HeaderWriterFilter@4045fd1f, org.springframework.security.web.authentication.logout.LogoutFilter@4c41a177, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2b6fcca1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@e706aa, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@24b3f778, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36665c11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4f2300, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@164dea80, org.springframework.security.web.session.SessionManagementFilter@67e11bda, org.springframework.security.web.access.ExceptionTranslationFilter@54941dfd, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@50785f86]
2022-03-02 18:36:28.343  INFO 1708 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 18:36:28.424  WARN 1708 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 18:36:28.437  INFO 1708 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 18:36:28.518  INFO 1708 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 18:36:28.627  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 18:36:28.636  INFO 1708 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:36:28.679  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 18:36:28.680  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 18:36:28.680  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 18:36:28.680  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 18:36:28.680  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 18:36:28.681  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 18:36:28.681  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 18:36:28.992  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 18:36:28.998  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 18:36:29.004  INFO 1708 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 18:36:29.017  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646235389016 with initial instances count: 3
2022-03-02 18:36:29.020  INFO 1708 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 18:36:29.021  INFO 1708 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646235389021, current=UP, previous=STARTING]
2022-03-02 18:36:29.023  INFO 1708 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:36:29.043  INFO 1708 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 18:36:29.044  INFO 1708 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 18:36:29.069  INFO 1708 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:36:29.132  INFO 1708 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.303 seconds (JVM running for 6.85)
2022-03-02 18:36:36.906  INFO 1708 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 18:36:36.906  INFO 1708 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 18:36:36.909  INFO 1708 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 18:36:41.422  INFO 1708 --- [http-nio-9001-exec-3] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:352149}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 18:41:28.703  INFO 1708 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:46:28.714  INFO 1708 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 18:49:47.733  INFO 1708 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 18:49:47.733  INFO 1708 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646236187733, current=DOWN, previous=UP]
2022-03-02 18:49:47.733  INFO 1708 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 18:49:47.738  INFO 1708 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 18:49:47.936  INFO 1708 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 18:49:50.951  INFO 1708 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 18:49:50.955  INFO 1708 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 18:49:50.960  INFO 1708 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 19:13:40.763  INFO 20192 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 20192 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 19:13:40.765  INFO 20192 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 19:13:41.943  INFO 20192 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 19:13:42.096  INFO 20192 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 4 MongoDB repository interfaces.
2022-03-02 19:13:42.383  INFO 20192 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 19:13:42.895  INFO 20192 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 19:13:42.906  INFO 20192 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 19:13:42.906  INFO 20192 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 19:13:43.041  INFO 20192 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 19:13:43.041  INFO 20192 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2220 ms
2022-03-02 19:13:43.518  INFO 20192 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 19:13:43.619  WARN 20192 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:13:43.619  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:13:43.657  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:13:43.659  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:13:43.802  WARN 20192 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:13:44.209  INFO 20192 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:13:44.311  INFO 20192 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:13:44.359  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:352687}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.359  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:347577}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.359  INFO 20192 --- [cluster-rtt-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:352687}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.359  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=296176800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 19:13:31 MSK 2022, lastUpdateTimeNanos=33239697356300}
2022-03-02 19:13:44.359  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=301465799, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 19:13:31 MSK 2022, lastUpdateTimeNanos=33239698528700}
2022-03-02 19:13:44.360  INFO 20192 --- [cluster-rtt-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:347577}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.362  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.363  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.363  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.363  INFO 20192 --- [cluster-rtt-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:348364}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.364  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:348364}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:13:44.364  INFO 20192 --- [cluster-ClusterId{value='621f97b7526ed9550a6ffd08', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=305802901, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 19:13:31 MSK 2022, lastUpdateTimeNanos=33239702798000}
2022-03-02 19:13:44.490  INFO 20192 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 19:13:44.539  INFO 20192 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45bf93bb, org.springframework.security.web.context.SecurityContextPersistenceFilter@3e01796a, org.springframework.security.web.header.HeaderWriterFilter@516c20de, org.springframework.security.web.authentication.logout.LogoutFilter@4cd5fc46, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5c997de8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4491eaeb, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6b7c4734, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e91facf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6ac9b66b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2f6e92ca, org.springframework.security.web.session.SessionManagementFilter@7a62d697, org.springframework.security.web.access.ExceptionTranslationFilter@25e6c22a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@65ef9a0a]
2022-03-02 19:13:45.413  INFO 20192 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 19:13:45.481  WARN 20192 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 19:13:45.492  INFO 20192 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 19:13:45.555  INFO 20192 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 19:13:45.642  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 19:13:45.649  INFO 20192 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:13:45.683  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 19:13:45.684  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 19:13:45.684  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 19:13:45.684  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 19:13:45.684  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 19:13:45.684  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 19:13:45.684  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 19:13:45.987  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 19:13:45.993  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 19:13:46.000  INFO 20192 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 19:13:46.013  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646237626011 with initial instances count: 2
2022-03-02 19:13:46.016  INFO 20192 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 19:13:46.018  INFO 20192 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646237626017, current=UP, previous=STARTING]
2022-03-02 19:13:46.020  INFO 20192 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:13:46.043  INFO 20192 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 19:13:46.044  INFO 20192 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 19:13:46.066  INFO 20192 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:13:46.141  INFO 20192 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.022 seconds (JVM running for 6.554)
2022-03-02 19:14:02.616  INFO 20192 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 19:14:02.616  INFO 20192 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 19:14:02.619  INFO 20192 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 19:14:03.073  INFO 20192 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:352647}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:18:45.702  INFO 20192 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:23:26.367 ERROR 20192 --- [http-nio-9001-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is org.springframework.dao.DuplicateKeyException: Write operation error on server cluster0-shard-00-01.vbyd5.mongodb.net:27017. Write error: WriteError{code=11000, message='E11000 duplicate key error collection: tipsDB.card index: cardUniqueIndex dup key: { number: "5555444433332222" }', details={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error on server cluster0-shard-00-01.vbyd5.mongodb.net:27017. Write error: WriteError{code=11000, message='E11000 duplicate key error collection: tipsDB.card index: cardUniqueIndex dup key: { number: "5555444433332222" }', details={}}.] with root cause

com.mongodb.MongoWriteException: Write operation error on server cluster0-shard-00-01.vbyd5.mongodb.net:27017. Write error: WriteError{code=11000, message='E11000 duplicate key error collection: tipsDB.card index: cardUniqueIndex dup key: { number: "5555444433332222" }', details={}}.
	at com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1018) ~[mongodb-driver-sync-4.4.1.jar:na]
	at com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:471) ~[mongodb-driver-sync-4.4.1.jar:na]
	at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:454) ~[mongodb-driver-sync-4.4.1.jar:na]
	at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:448) ~[mongodb-driver-sync-4.4.1.jar:na]
	at org.springframework.data.mongodb.core.MongoTemplate.lambda$insertDocument$16(MongoTemplate.java:1465) ~[spring-data-mongodb-3.3.1.jar:3.3.1]
	at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:555) ~[spring-data-mongodb-3.3.1.jar:3.3.1]
	at org.springframework.data.mongodb.core.MongoTemplate.insertDocument(MongoTemplate.java:1459) ~[spring-data-mongodb-3.3.1.jar:3.3.1]
	at org.springframework.data.mongodb.core.MongoTemplate.doInsert(MongoTemplate.java:1259) ~[spring-data-mongodb-3.3.1.jar:3.3.1]
	at org.springframework.data.mongodb.core.MongoTemplate.insert(MongoTemplate.java:1174) ~[spring-data-mongodb-3.3.1.jar:3.3.1]
	at org.springframework.data.mongodb.repository.support.SimpleMongoRepository.save(SimpleMongoRepository.java:95) ~[spring-data-mongodb-3.3.1.jar:3.3.1]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.15.jar:5.3.15]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.15.jar:5.3.15]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80) ~[spring-data-commons-2.6.1.jar:2.6.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.15.jar:5.3.15]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.15.jar:5.3.15]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.15.jar:5.3.15]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.15.jar:5.3.15]
	at jdk.proxy2/jdk.proxy2.$Proxy113.save(Unknown Source) ~[na:na]
	at ru.otus.spring.service.CardServiceImpl.addCard(CardServiceImpl.java:29) ~[classes/:na]
	at ru.otus.spring.rest.CardController.addCard(CardController.java:37) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:23:45.704  INFO 20192 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:27:19.936  WARN 20192 --- [http-nio-9001-exec-4] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
2022-03-02 19:28:45.711  INFO 20192 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:31:46.249  WARN 20192 --- [http-nio-9001-exec-2] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 19:31:46.250  WARN 20192 --- [http-nio-9001-exec-2] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 19:31:46.259 ERROR 20192 --- [http-nio-9001-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add?cardNumber=5555444433332222&operationAmount=300.0&feeAmount=10.00&description=%D0%9E%D0%BF%D0%BB%D0%B0%D1%82%D0%B0%20%D1%87%D0%B0%D0%B5%D0%B2%D1%8B%D1%85%20%D0%B2%20%D0%BA%D0%B0%D1%84%D0%B5] [PaymentServiceProxy#addPayment(String,BigDecimal,BigDecimal,String)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add?cardNumber=5555444433332222&operationAmount=300.0&feeAmount=10.00&description=%D0%9E%D0%BF%D0%BB%D0%B0%D1%82%D0%B0%20%D1%87%D0%B0%D0%B5%D0%B2%D1%8B%D1%85%20%D0%B2%20%D0%BA%D0%B0%D1%84%D0%B5] [PaymentServiceProxy#addPayment(String,BigDecimal,BigDecimal,String)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy126.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:39) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:32:54.674  INFO 20192 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 19:32:54.675  INFO 20192 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646238774675, current=DOWN, previous=UP]
2022-03-02 19:32:54.675  INFO 20192 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:32:54.679  INFO 20192 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:32:54.879  INFO 20192 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 19:32:57.886  INFO 20192 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 19:32:57.890  INFO 20192 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 19:32:57.894  INFO 20192 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 19:33:37.272  INFO 15728 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 15728 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 19:33:37.276  INFO 15728 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 19:33:39.341  INFO 15728 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 19:33:39.572  INFO 15728 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 223 ms. Found 4 MongoDB repository interfaces.
2022-03-02 19:33:40.067  INFO 15728 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 19:33:40.712  INFO 15728 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 19:33:40.726  INFO 15728 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 19:33:40.727  INFO 15728 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 19:33:40.875  INFO 15728 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 19:33:40.875  INFO 15728 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3465 ms
2022-03-02 19:33:41.339  INFO 15728 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 19:33:41.436  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:33:41.441  WARN 15728 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:33:41.478  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:33:41.480  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:33:41.618  WARN 15728 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:33:41.998  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:347871}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:33:41.998  INFO 15728 --- [cluster-rtt-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:348673}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:33:41.998  INFO 15728 --- [cluster-rtt-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:347871}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:33:41.999  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:352977}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:33:41.999  INFO 15728 --- [cluster-rtt-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:352977}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:33:41.999  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=304729600, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 19:33:31 MSK 2022, lastUpdateTimeNanos=34437336103499}
2022-03-02 19:33:41.999  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:348673}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:33:41.999  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=303797800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 19:33:31 MSK 2022, lastUpdateTimeNanos=34437336200200}
2022-03-02 19:33:42.000  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=301972299, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 19:33:31 MSK 2022, lastUpdateTimeNanos=34437336161000}
2022-03-02 19:33:42.003  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:33:42.003  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:33:42.003  INFO 15728 --- [cluster-ClusterId{value='621f9c654669251750a0ef51', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:33:42.093  INFO 15728 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:33:42.159  INFO 15728 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:33:42.339  INFO 15728 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 19:33:42.379  INFO 15728 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@713e7d9a, org.springframework.security.web.context.SecurityContextPersistenceFilter@50672905, org.springframework.security.web.header.HeaderWriterFilter@64665781, org.springframework.security.web.authentication.logout.LogoutFilter@36665c11, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@70f98f7a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@54941dfd, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@681d704e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@58f290bc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1fa98a22, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@846b47, org.springframework.security.web.session.SessionManagementFilter@11015ca0, org.springframework.security.web.access.ExceptionTranslationFilter@4cf230bf, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@21540255]
2022-03-02 19:33:43.213  INFO 15728 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 19:33:43.275  WARN 15728 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 19:33:43.288  INFO 15728 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 19:33:43.338  INFO 15728 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 19:33:43.424  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 19:33:43.431  INFO 15728 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:33:43.463  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 19:33:43.463  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 19:33:43.463  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 19:33:43.463  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 19:33:43.463  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 19:33:43.464  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 19:33:43.464  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 19:33:43.747  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 19:33:43.752  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 19:33:43.758  INFO 15728 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 19:33:43.771  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646238823770 with initial instances count: 0
2022-03-02 19:33:43.774  INFO 15728 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 19:33:43.774  INFO 15728 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646238823774, current=UP, previous=STARTING]
2022-03-02 19:33:43.776  INFO 15728 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:33:43.798  INFO 15728 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 19:33:43.799  INFO 15728 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 19:33:43.824  INFO 15728 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:33:43.880  INFO 15728 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 7.683 seconds (JVM running for 8.563)
2022-03-02 19:33:49.747  INFO 15728 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 19:33:49.747  INFO 15728 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 19:33:49.750  INFO 15728 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 19:33:56.712  INFO 15728 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:352978}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:33:56.964  WARN 15728 --- [http-nio-9001-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public ru.otus.spring.rest.dto.TipDto ru.otus.spring.rest.TipController.addTip(java.lang.String,java.lang.String,ru.otus.spring.model.Tip)]
2022-03-02 19:34:02.984  WARN 15728 --- [http-nio-9001-exec-7] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: fee-service
2022-03-02 19:34:02.985  WARN 15728 --- [http-nio-9001-exec-7] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service fee-service
2022-03-02 19:34:02.997 ERROR 15728 --- [http-nio-9001-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy122.getFeeByBinForAmount(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:38) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:34:10.421  WARN 15728 --- [http-nio-9001-exec-9] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: fee-service
2022-03-02 19:34:10.422  WARN 15728 --- [http-nio-9001-exec-9] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service fee-service
2022-03-02 19:34:10.423 ERROR 15728 --- [http-nio-9001-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy122.getFeeByBinForAmount(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:38) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:34:13.761  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 19:34:13.761  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 19:34:13.762  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 19:34:13.762  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 19:34:13.762  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 19:34:13.762  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Application version is -1: false
2022-03-02 19:34:13.762  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 19:34:13.782  INFO 15728 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 19:38:43.469  INFO 15728 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:42:01.038  INFO 15728 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 19:42:01.038  INFO 15728 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646239321038, current=DOWN, previous=UP]
2022-03-02 19:42:01.038  INFO 15728 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:42:01.043  INFO 15728 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:42:01.244  INFO 15728 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 19:42:04.256  INFO 15728 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 19:42:04.263  INFO 15728 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 19:42:04.268  INFO 15728 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 19:43:29.659  INFO 9400 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 9400 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 19:43:29.662  INFO 9400 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 19:43:30.972  INFO 9400 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 19:43:31.124  INFO 9400 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 4 MongoDB repository interfaces.
2022-03-02 19:43:31.434  INFO 9400 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 19:43:31.933  INFO 9400 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 19:43:31.944  INFO 9400 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 19:43:31.945  INFO 9400 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 19:43:32.084  INFO 9400 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 19:43:32.084  INFO 9400 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2352 ms
2022-03-02 19:43:32.564  INFO 9400 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 19:43:32.595  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:43:32.638  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:43:32.640  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:43:32.677  WARN 9400 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:43:32.874  WARN 9400 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:43:33.162  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:348815}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.163  INFO 9400 --- [cluster-rtt-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:353124}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.163  INFO 9400 --- [cluster-rtt-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:348815}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.163  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:348013}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.163  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:353124}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.163  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=305580200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 19:43:31 MSK 2022, lastUpdateTimeNanos=35028500291099}
2022-03-02 19:43:33.164  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=307873200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 19:43:31 MSK 2022, lastUpdateTimeNanos=35028500291099}
2022-03-02 19:43:33.163  INFO 9400 --- [cluster-rtt-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:348013}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.164  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=306669100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 19:43:31 MSK 2022, lastUpdateTimeNanos=35028500291099}
2022-03-02 19:43:33.167  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.168  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.168  INFO 9400 --- [cluster-ClusterId{value='621f9eb47150b5306b2cdf92', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:43:33.324  INFO 9400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:43:33.394  INFO 9400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:43:33.608  INFO 9400 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 19:43:33.658  INFO 9400 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50785f86, org.springframework.security.web.context.SecurityContextPersistenceFilter@13ee97af, org.springframework.security.web.header.HeaderWriterFilter@1fa98a22, org.springframework.security.web.authentication.logout.LogoutFilter@7a62d697, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@846b47, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@4345fd45, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7c3c3d67, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@341ccfd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2976ef56, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1e258d3b, org.springframework.security.web.session.SessionManagementFilter@5a7e81, org.springframework.security.web.access.ExceptionTranslationFilter@40c28b0d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@70f98f7a]
2022-03-02 19:43:34.567  INFO 9400 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 19:43:34.648  WARN 9400 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 19:43:34.660  INFO 9400 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 19:43:34.727  INFO 9400 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 19:43:34.828  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 19:43:34.837  INFO 9400 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:43:34.879  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 19:43:34.880  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 19:43:34.880  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 19:43:34.880  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 19:43:34.880  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 19:43:34.880  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 19:43:34.880  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 19:43:35.215  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 19:43:35.221  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 19:43:35.226  INFO 9400 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 19:43:35.238  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646239415237 with initial instances count: 2
2022-03-02 19:43:35.240  INFO 9400 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 19:43:35.242  INFO 9400 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646239415242, current=UP, previous=STARTING]
2022-03-02 19:43:35.244  INFO 9400 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:43:35.268  INFO 9400 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 19:43:35.269  INFO 9400 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 19:43:35.291  INFO 9400 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:43:35.349  INFO 9400 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.371 seconds (JVM running for 6.979)
2022-03-02 19:43:44.264  INFO 9400 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 19:43:44.264  INFO 9400 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 19:43:44.267  INFO 9400 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 19:43:44.702  INFO 9400 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:353121}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:43:51.528  WARN 9400 --- [http-nio-9001-exec-4] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 19:43:51.533  WARN 9400 --- [http-nio-9001-exec-4] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 19:43:51.579 ERROR 9400 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add?cardNumber=5555444433332222&operationAmount=300.0&feeAmount=10.00&description=%D0%9E%D0%BF%D0%BB%D0%B0%D1%82%D0%B0%20%D1%87%D0%B0%D0%B5%D0%B2%D1%8B%D1%85%20%D0%B2%20%D0%BA%D0%B0%D1%84%D0%B5] [PaymentServiceProxy#addPayment(String,BigDecimal,BigDecimal,String)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add?cardNumber=5555444433332222&operationAmount=300.0&feeAmount=10.00&description=%D0%9E%D0%BF%D0%BB%D0%B0%D1%82%D0%B0%20%D1%87%D0%B0%D0%B5%D0%B2%D1%8B%D1%85%20%D0%B2%20%D0%BA%D0%B0%D1%84%D0%B5] [PaymentServiceProxy#addPayment(String,BigDecimal,BigDecimal,String)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy126.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:39) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:45:59.631  INFO 9400 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 19:45:59.632  INFO 9400 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646239559632, current=DOWN, previous=UP]
2022-03-02 19:45:59.632  INFO 9400 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:45:59.639  INFO 9400 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:45:59.854  INFO 9400 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 19:46:02.864  INFO 9400 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 19:46:02.870  INFO 9400 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 19:46:02.876  INFO 9400 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 19:46:17.537  INFO 19848 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 19848 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 19:46:17.540  INFO 19848 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 19:46:18.718  INFO 19848 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 19:46:18.870  INFO 19848 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 4 MongoDB repository interfaces.
2022-03-02 19:46:19.166  INFO 19848 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 19:46:19.664  INFO 19848 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 19:46:19.674  INFO 19848 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 19:46:19.674  INFO 19848 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 19:46:19.812  INFO 19848 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 19:46:19.812  INFO 19848 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2216 ms
2022-03-02 19:46:20.328  INFO 19848 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 19:46:20.424  WARN 19848 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:46:20.466  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:46:20.503  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:46:20.505  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:46:20.583  WARN 19848 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:46:21.032  INFO 19848 --- [cluster-rtt-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:353159}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.032  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:348052}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.032  INFO 19848 --- [cluster-rtt-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:348860}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.032  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:348860}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.032  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:353159}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.032  INFO 19848 --- [cluster-rtt-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:348052}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.033  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=312429500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 19:46:15 MSK 2022, lastUpdateTimeNanos=35196370310900}
2022-03-02 19:46:21.033  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=311050000, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 19:46:15 MSK 2022, lastUpdateTimeNanos=35196370005800}
2022-03-02 19:46:21.033  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=313228700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 19:46:15 MSK 2022, lastUpdateTimeNanos=35196371110500}
2022-03-02 19:46:21.036  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.036  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.036  INFO 19848 --- [cluster-ClusterId{value='621f9f5cb1658c604796b698', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:21.064  INFO 19848 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:46:21.133  INFO 19848 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:46:21.135  WARN 19848 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\TipController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\TipServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
2022-03-02 19:46:21.273  INFO 19848 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 19:46:21.296  INFO 19848 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 19:46:21.321 ERROR 19848 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\TipController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\TipServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:414) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.6.3.jar:2.6.3]
	at ru.otus.spring.TipsServiceApplication.main(TipsServiceApplication.java:16) ~[classes/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\TipServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.15.jar:5.3.15]
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.15.jar:5.3.15]
	... 33 common frames omitted
Caused by: java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at feign.Util.checkState(Util.java:122) ~[feign-core-11.8.jar:na]
	at feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:142) ~[feign-core-11.8.jar:na]
	at org.springframework.cloud.openfeign.support.SpringMvcContract.parseAndValidateMetadata(SpringMvcContract.java:193) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:65) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:151) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:49) ~[feign-core-11.8.jar:na]
	at feign.Feign$Builder.target(Feign.java:268) ~[feign-core-11.8.jar:na]
	at org.springframework.cloud.openfeign.DefaultTargeter.target(DefaultTargeter.java:30) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.loadBalance(FeignClientFactoryBean.java:379) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:427) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:402) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientsRegistrar.lambda$registerFeignClient$0(FeignClientsRegistrar.java:235) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1249) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1191) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.15.jar:5.3.15]
	... 42 common frames omitted

2022-03-02 19:46:36.202  INFO 1460 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 1460 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 19:46:36.612  INFO 1460 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 19:46:37.698  INFO 1460 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 19:46:37.842  INFO 1460 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 138 ms. Found 4 MongoDB repository interfaces.
2022-03-02 19:46:38.151  INFO 1460 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 19:46:38.740  INFO 1460 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 19:46:38.753  INFO 1460 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 19:46:38.754  INFO 1460 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 19:46:38.919  INFO 1460 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 19:46:38.920  INFO 1460 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2262 ms
2022-03-02 19:46:39.410  INFO 1460 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 19:46:39.506  WARN 1460 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:46:39.535  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:46:39.575  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:46:39.576  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:46:39.700  WARN 1460 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:46:40.123  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:348861}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.124  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:348055}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.124  INFO 1460 --- [cluster-rtt-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:348055}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.123  INFO 1460 --- [cluster-rtt-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:353155}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.124  INFO 1460 --- [cluster-rtt-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:348861}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.123  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:353155}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.124  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=308077700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 19:46:31 MSK 2022, lastUpdateTimeNanos=35215462038200}
2022-03-02 19:46:40.124  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=308250100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 19:46:31 MSK 2022, lastUpdateTimeNanos=35215462206200}
2022-03-02 19:46:40.124  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=301146700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 19:46:31 MSK 2022, lastUpdateTimeNanos=35215462076300}
2022-03-02 19:46:40.127  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.128  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.128  INFO 1460 --- [cluster-ClusterId{value='621f9f6f09a9c7161d9a88de', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:46:40.184  INFO 1460 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:46:40.245  INFO 1460 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:46:40.247  WARN 1460 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\TipController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\TipServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
2022-03-02 19:46:40.382  INFO 1460 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 19:46:40.404  INFO 1460 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 19:46:40.430 ERROR 1460 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipController' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\rest\TipController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\TipServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:414) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.6.3.jar:2.6.3]
	at ru.otus.spring.TipsServiceApplication.main(TipsServiceApplication.java:16) ~[classes/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'tipServiceImpl' defined in file [C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes\ru\otus\spring\service\TipServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.15.jar:5.3.15]
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'ru.otus.spring.feign.PaymentServiceProxy': Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.15.jar:5.3.15]
	... 33 common frames omitted
Caused by: java.lang.IllegalStateException: Method has too many Body parameters: public abstract void ru.otus.spring.feign.PaymentServiceProxy.addPayment(java.lang.String,java.math.BigDecimal,java.math.BigDecimal,java.lang.String)
Warnings:
- 
	at feign.Util.checkState(Util.java:122) ~[feign-core-11.8.jar:na]
	at feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:142) ~[feign-core-11.8.jar:na]
	at org.springframework.cloud.openfeign.support.SpringMvcContract.parseAndValidateMetadata(SpringMvcContract.java:193) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:65) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:151) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:49) ~[feign-core-11.8.jar:na]
	at feign.Feign$Builder.target(Feign.java:268) ~[feign-core-11.8.jar:na]
	at org.springframework.cloud.openfeign.DefaultTargeter.target(DefaultTargeter.java:30) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.loadBalance(FeignClientFactoryBean.java:379) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:427) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:402) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.cloud.openfeign.FeignClientsRegistrar.lambda$registerFeignClient$0(FeignClientsRegistrar.java:235) ~[spring-cloud-openfeign-core-3.1.1.jar:3.1.1]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1249) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1191) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.15.jar:5.3.15]
	... 42 common frames omitted

2022-03-02 19:55:19.930  INFO 16328 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 16328 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 19:55:19.932  INFO 16328 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 19:55:21.081  INFO 16328 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 19:55:21.234  INFO 16328 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 146 ms. Found 4 MongoDB repository interfaces.
2022-03-02 19:55:21.561  INFO 16328 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 19:55:22.052  INFO 16328 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 19:55:22.064  INFO 16328 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 19:55:22.065  INFO 16328 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 19:55:22.202  INFO 16328 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 19:55:22.202  INFO 16328 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2206 ms
2022-03-02 19:55:22.709  INFO 16328 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 19:55:22.806  WARN 16328 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:55:22.813  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:55:22.851  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:55:22.853  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 19:55:22.992  WARN 16328 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 19:55:23.408  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:348193}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.408  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:348994}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.408  INFO 16328 --- [cluster-rtt-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:348994}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.408  INFO 16328 --- [cluster-rtt-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:353301}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.408  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=322086800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 19:55:15 MSK 2022, lastUpdateTimeNanos=35738745675600}
2022-03-02 19:55:23.409  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:353301}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.409  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=320086600, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 19:55:15 MSK 2022, lastUpdateTimeNanos=35738745675600}
2022-03-02 19:55:23.409  INFO 16328 --- [cluster-rtt-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:348193}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.409  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=323016200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 19:55:15 MSK 2022, lastUpdateTimeNanos=35738745802900}
2022-03-02 19:55:23.412  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.412  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.413  INFO 16328 --- [cluster-ClusterId{value='621fa17a8f6e673c45cfe1d6', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:55:23.476  INFO 16328 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:55:23.548  INFO 16328 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 19:55:23.742  INFO 16328 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 19:55:23.785  INFO 16328 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d764641, org.springframework.security.web.context.SecurityContextPersistenceFilter@341ccfd1, org.springframework.security.web.header.HeaderWriterFilter@5a7e81, org.springframework.security.web.authentication.logout.LogoutFilter@3e01796a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3e6acec2, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@10d905c1, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@1e8bccfb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3cead673, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4152bd0f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77eb607e, org.springframework.security.web.session.SessionManagementFilter@13ee97af, org.springframework.security.web.access.ExceptionTranslationFilter@1fa98a22, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@681d704e]
2022-03-02 19:55:24.582  INFO 16328 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 19:55:24.647  WARN 16328 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 19:55:24.657  INFO 16328 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 19:55:24.708  INFO 16328 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 19:55:24.792  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 19:55:24.801  INFO 16328 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 19:55:24.834  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 19:55:24.834  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 19:55:24.835  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 19:55:24.835  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 19:55:24.835  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 19:55:24.835  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 19:55:24.835  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 19:55:25.130  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 19:55:25.135  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 19:55:25.141  INFO 16328 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 19:55:25.153  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646240125152 with initial instances count: 0
2022-03-02 19:55:25.155  INFO 16328 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 19:55:25.156  INFO 16328 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646240125156, current=UP, previous=STARTING]
2022-03-02 19:55:25.157  INFO 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:55:25.177  INFO 16328 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 19:55:25.178  INFO 16328 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 19:55:25.202  INFO 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 19:55:25.260  INFO 16328 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.997 seconds (JVM running for 6.553)
2022-03-02 19:55:43.386  INFO 16328 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 19:55:43.386  INFO 16328 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 19:55:43.388  INFO 16328 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 19:55:43.835  INFO 16328 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:353309}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 19:55:47.776  WARN 16328 --- [http-nio-9001-exec-4] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: fee-service
2022-03-02 19:55:47.777  WARN 16328 --- [http-nio-9001-exec-4] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service fee-service
2022-03-02 19:55:47.792 ERROR 16328 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy122.getFeeByBinForAmount(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:39) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:55:55.145  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 19:55:55.146  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 19:55:55.146  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 19:55:55.146  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 19:55:55.146  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 19:55:55.146  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Application version is -1: false
2022-03-02 19:55:55.146  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 19:55:55.159  INFO 16328 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 19:57:36.337  INFO 16328 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 19:57:36.338  INFO 16328 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646240256337, current=DOWN, previous=UP]
2022-03-02 19:57:36.338  INFO 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 19:57:36.344  INFO 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/} exception=I/O error on POST request for "http://localhost:8761/eureka/apps/TIPS-SERVICE": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8761/eureka/apps/TIPS-SERVICE": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at org.springframework.cloud.netflix.eureka.http.RestTemplateEurekaHttpClient.register(RestTemplateEurekaHttpClient.java:77)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:91)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:876)
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121)
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)
	at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)
	... 21 more
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:576)
	at java.base/sun.nio.ch.Net.connect(Net.java:565)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:333)
	at java.base/java.net.Socket.connect(Socket.java:645)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 34 more

2022-03-02 19:57:36.345  WARN 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: I/O error on POST request for "http://localhost:8761/eureka/apps/TIPS-SERVICE": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
2022-03-02 19:57:36.360  INFO 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/}, exception=I/O error on POST request for "http://localhost:8761/eureka/apps/TIPS-SERVICE": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8761/eureka/apps/TIPS-SERVICE": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at org.springframework.cloud.netflix.eureka.http.RestTemplateEurekaHttpClient.register(RestTemplateEurekaHttpClient.java:77)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:121)
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:80)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:876)
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121)
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)
	at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)
	... 22 more
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:576)
	at java.base/sun.nio.ch.Net.connect(Net.java:565)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:333)
	at java.base/java.net.Socket.connect(Socket.java:645)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 35 more

2022-03-02 19:57:36.362  WARN 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: I/O error on POST request for "http://localhost:8761/eureka/apps/TIPS-SERVICE": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
2022-03-02 19:57:36.363  WARN 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration failed Cannot execute request on any known server

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:876) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) ~[eureka-client-1.10.17.jar:1.10.17]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:57:36.364  WARN 16328 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.discovery.InstanceInfoReplicator     : There was a problem with the instance info replicator

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:876) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) ~[eureka-client-1.10.17.jar:1.10.17]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:57:36.556  INFO 16328 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 19:57:39.561  INFO 16328 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 19:57:39.567  INFO 16328 --- [SpringApplicationShutdownHook] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/}, exception=I/O error on DELETE request for "http://localhost:8761/eureka/apps/TIPS-SERVICE/tips-service:9001": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on DELETE request for "http://localhost:8761/eureka/apps/TIPS-SERVICE/tips-service:9001": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at org.springframework.cloud.netflix.eureka.http.RestTemplateEurekaHttpClient.cancel(RestTemplateEurekaHttpClient.java:87)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74)
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:121)
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:80)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74)
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74)
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71)
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:972)
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:948)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:347)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:177)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:196)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.run(DisposableBeanAdapter.java:189)
	at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.destroy(GenericScope.java:390)
	at org.springframework.cloud.context.scope.GenericScope.destroy(GenericScope.java:136)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:212)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:587)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:559)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1161)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:520)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1106)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1075)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:172)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:137)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:106)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)
	at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)
	... 40 more
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:576)
	at java.base/sun.nio.ch.Net.connect(Net.java:565)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:333)
	at java.base/java.net.Socket.connect(Socket.java:645)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 53 more

2022-03-02 19:57:39.567  WARN 16328 --- [SpringApplicationShutdownHook] c.n.d.s.t.d.RetryableEurekaHttpClient    : Request execution failed with message: I/O error on DELETE request for "http://localhost:8761/eureka/apps/TIPS-SERVICE/tips-service:9001": Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
2022-03-02 19:57:39.568 ERROR 16328 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - de-registration failedCannot execute request on any known server

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:972) ~[eureka-client-1.10.17.jar:1.10.17]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:948) ~[eureka-client-1.10.17.jar:1.10.17]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:347) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:177) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:196) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.run(DisposableBeanAdapter.java:189) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.destroy(GenericScope.java:390) ~[spring-cloud-context-3.1.1.jar:3.1.1]
	at org.springframework.cloud.context.scope.GenericScope.destroy(GenericScope.java:136) ~[spring-cloud-context-3.1.1.jar:3.1.1]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:212) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:587) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:559) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1161) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:520) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1154) ~[spring-beans-5.3.15.jar:5.3.15]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1106) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1075) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:172) ~[spring-boot-2.6.3.jar:2.6.3]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1021) ~[spring-context-5.3.15.jar:5.3.15]
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:137) ~[spring-boot-2.6.3.jar:2.6.3]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:106) ~[spring-boot-2.6.3.jar:2.6.3]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 19:57:39.572  INFO 16328 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 20:01:29.611  INFO 16988 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 16988 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 20:01:29.613  INFO 16988 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 20:01:30.907  INFO 16988 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 20:01:31.051  INFO 16988 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 139 ms. Found 4 MongoDB repository interfaces.
2022-03-02 20:01:31.371  INFO 16988 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 20:01:31.888  INFO 16988 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 20:01:31.899  INFO 16988 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 20:01:31.899  INFO 16988 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 20:01:32.040  INFO 16988 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 20:01:32.041  INFO 16988 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2372 ms
2022-03-02 20:01:32.488  INFO 16988 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 20:01:32.591  WARN 16988 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 20:01:32.626  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 20:01:32.665  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 20:01:32.667  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 20:01:32.774  WARN 16988 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 20:01:33.187  INFO 16988 --- [cluster-rtt-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:348277}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.187  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:353396}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.187  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:349085}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.188  INFO 16988 --- [cluster-rtt-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:349085}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.188  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=285970500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 20:01:25 MSK 2022, lastUpdateTimeNanos=180008170000}
2022-03-02 20:01:33.188  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=288228800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 20:01:25 MSK 2022, lastUpdateTimeNanos=180007628100}
2022-03-02 20:01:33.188  INFO 16988 --- [cluster-rtt-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:353396}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.188  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:348277}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.189  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=287084300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 20:01:25 MSK 2022, lastUpdateTimeNanos=180007668900}
2022-03-02 20:01:33.192  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.193  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.193  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:01:33.233  INFO 16988 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 20:01:33.301  INFO 16988 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 20:01:33.506  INFO 16988 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 20:01:33.544  INFO 16988 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@713e7d9a, org.springframework.security.web.context.SecurityContextPersistenceFilter@54941dfd, org.springframework.security.web.header.HeaderWriterFilter@6ae42248, org.springframework.security.web.authentication.logout.LogoutFilter@16fc5622, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@70f98f7a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@53ba25ff, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@681d704e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4045fd1f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3cead673, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@846b47, org.springframework.security.web.session.SessionManagementFilter@cf984d9, org.springframework.security.web.access.ExceptionTranslationFilter@58f290bc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@21540255]
2022-03-02 20:01:34.324  INFO 16988 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 20:01:34.380  WARN 16988 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 20:01:34.388  INFO 16988 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 20:01:34.436  INFO 16988 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 20:01:34.526  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 20:01:34.534  INFO 16988 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:01:34.566  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 20:01:34.566  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 20:01:34.566  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 20:01:34.566  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 20:01:34.566  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 20:01:34.567  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 20:01:34.567  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 20:01:34.889  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 20:01:34.895  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 20:01:34.900  INFO 16988 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 20:01:34.914  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646240494913 with initial instances count: 2
2022-03-02 20:01:34.917  INFO 16988 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 20:01:34.917  INFO 16988 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646240494917, current=UP, previous=STARTING]
2022-03-02 20:01:34.919  INFO 16988 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 20:01:34.941  INFO 16988 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 20:01:34.942  INFO 16988 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 20:01:34.967  INFO 16988 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 20:01:35.033  INFO 16988 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.074 seconds (JVM running for 6.665)
2022-03-02 20:02:03.100  INFO 16988 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 20:02:03.101  INFO 16988 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 20:02:03.102  INFO 16988 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2022-03-02 20:02:03.742  INFO 16988 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:353411}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:02:11.859  WARN 16988 --- [http-nio-9001-exec-4] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 20:02:11.860  WARN 16988 --- [http-nio-9001-exec-4] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 20:02:11.877 ERROR 16988 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 20:06:34.576  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:09:44.398  WARN 16988 --- [http-nio-9001-exec-6] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 20:09:44.399  WARN 16988 --- [http-nio-9001-exec-6] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 20:09:44.401 ERROR 16988 --- [http-nio-9001-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 20:09:57.663  WARN 16988 --- [http-nio-9001-exec-8] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 20:09:57.663  WARN 16988 --- [http-nio-9001-exec-8] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 20:09:57.665 ERROR 16988 --- [http-nio-9001-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 20:11:34.590  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:16:34.601  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:21:34.614  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:26:30.156  WARN 16988 --- [http-nio-9001-exec-4] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 20:26:30.156  WARN 16988 --- [http-nio-9001-exec-4] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 20:26:30.158 ERROR 16988 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 20:26:34.629  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:31:34.641  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:36:34.646  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:41:34.658  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:43:14.842  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server cluster0-shard-00-01.vbyd5.mongodb.net:27017

com.mongodb.MongoSocketReadTimeoutException: Timeout while receiving message
	at com.mongodb.internal.connection.InternalStreamConnection.translateReadException(InternalStreamConnection.java:701) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:579) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:415) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:374) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:216) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:152) ~[mongodb-driver-core-4.4.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:283) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:309) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:350) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:976) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:478) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:472) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1454) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1060) ~[na:na]
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:109) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:131) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:718) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:576) ~[mongodb-driver-core-4.4.1.jar:na]
	... 5 common frames omitted

2022-03-02 20:43:14.984  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server cluster0-shard-00-02.vbyd5.mongodb.net:27017

com.mongodb.MongoSocketReadTimeoutException: Timeout while receiving message
	at com.mongodb.internal.connection.InternalStreamConnection.translateReadException(InternalStreamConnection.java:701) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:579) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:415) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:374) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:216) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:152) ~[mongodb-driver-core-4.4.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:283) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:309) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:350) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:976) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:478) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:472) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1454) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1060) ~[na:na]
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:109) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:131) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:718) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:576) ~[mongodb-driver-core-4.4.1.jar:na]
	... 5 common frames omitted

2022-03-02 20:43:15.015  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server cluster0-shard-00-00.vbyd5.mongodb.net:27017

com.mongodb.MongoSocketReadTimeoutException: Timeout while receiving message
	at com.mongodb.internal.connection.InternalStreamConnection.translateReadException(InternalStreamConnection.java:701) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:579) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:415) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:374) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:216) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:152) ~[mongodb-driver-core-4.4.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:283) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:309) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:350) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803) ~[na:na]
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:976) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:478) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:472) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1454) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1060) ~[na:na]
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:109) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:131) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:718) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:576) ~[mongodb-driver-core-4.4.1.jar:na]
	... 5 common frames omitted

2022-03-02 20:43:16.886  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server cluster0-shard-00-01.vbyd5.mongodb.net:27017

com.mongodb.MongoSocketOpenException: Exception opening socket
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:188) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:152) ~[mongodb-driver-core-4.4.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:669) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:333) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:645) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:300) ~[na:na]
	at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.4.1.jar:na]
	... 4 common frames omitted

2022-03-02 20:43:17.043  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server cluster0-shard-00-02.vbyd5.mongodb.net:27017

com.mongodb.MongoSocketOpenException: Exception opening socket
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:188) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:152) ~[mongodb-driver-core-4.4.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:669) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:333) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:645) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:300) ~[na:na]
	at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.4.1.jar:na]
	... 4 common frames omitted

2022-03-02 20:43:17.060  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server cluster0-shard-00-00.vbyd5.mongodb.net:27017

com.mongodb.MongoSocketOpenException: Exception opening socket
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:188) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:152) ~[mongodb-driver-core-4.4.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:669) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:333) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:645) ~[na:na]
	at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:300) ~[na:na]
	at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.4.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.4.1.jar:na]
	... 4 common frames omitted

2022-03-02 20:43:48.844  INFO 16988 --- [cluster-rtt-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:23, serverValue:349703}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 20:43:48.862  INFO 16988 --- [cluster-rtt-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:24, serverValue:354021}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:43:49.356  INFO 16988 --- [cluster-rtt-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:25, serverValue:348903}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 20:43:51.100  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:26, serverValue:354021}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:43:51.101  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=92140800, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 20:43:46 MSK 2022, lastUpdateTimeNanos=2717921493500}
2022-03-02 20:43:51.101  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:43:51.249  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:27, serverValue:348903}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 20:43:51.249  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=96050900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 20:43:46 MSK 2022, lastUpdateTimeNanos=2718070703700}
2022-03-02 20:43:51.299  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:28, serverValue:349703}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 20:43:51.299  INFO 16988 --- [cluster-ClusterId{value='621fa2ec6d335137f46095bb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=96188900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 20:43:46 MSK 2022, lastUpdateTimeNanos=2718121042900}
2022-03-02 20:46:34.664  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:51:34.670  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:51:56.770  INFO 16988 --- [http-nio-9001-exec-6] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:29, serverValue:354148}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 20:51:57.160  WARN 16988 --- [http-nio-9001-exec-6] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 20:51:57.161  WARN 16988 --- [http-nio-9001-exec-6] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 20:51:57.163 ERROR 16988 --- [http-nio-9001-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 20:56:34.679  INFO 16988 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 20:57:09.236  INFO 16988 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 20:57:09.237  INFO 16988 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646243829237, current=DOWN, previous=UP]
2022-03-02 20:57:09.237  INFO 16988 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 20:57:09.245  INFO 16988 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 20:57:09.442  INFO 16988 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 20:57:12.456  INFO 16988 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 20:57:12.463  INFO 16988 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 20:57:12.469  INFO 16988 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 21:05:17.211  INFO 19096 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 19096 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:05:17.214  INFO 19096 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:05:18.396  INFO 19096 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:05:18.543  INFO 19096 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 141 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:05:18.833  INFO 19096 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:05:19.322  INFO 19096 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:05:19.334  INFO 19096 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:05:19.334  INFO 19096 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:05:19.471  INFO 19096 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:05:19.472  INFO 19096 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2201 ms
2022-03-02 21:05:19.966  INFO 19096 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:05:20.072  WARN 19096 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:05:20.102  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:05:20.146  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:05:20.147  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:05:20.251  WARN 19096 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:05:20.653  INFO 19096 --- [cluster-rtt-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:354342}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.653  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:354341}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.653  INFO 19096 --- [cluster-rtt-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:349223}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.653  INFO 19096 --- [cluster-rtt-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350023}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.653  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:349223}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.653  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350023}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.654  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=283992400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:05:15 MSK 2022, lastUpdateTimeNanos=4007472933000}
2022-03-02 21:05:20.654  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=164587500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:05:15 MSK 2022, lastUpdateTimeNanos=4007473539700}
2022-03-02 21:05:20.654  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=206431100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:05:15 MSK 2022, lastUpdateTimeNanos=4007473778800}
2022-03-02 21:05:20.657  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.657  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.657  INFO 19096 --- [cluster-ClusterId{value='621fb1df28156f26d2bf6deb', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:05:20.723  INFO 19096 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:05:20.788  INFO 19096 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:05:20.975  INFO 19096 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:05:21.028  INFO 19096 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@39f93225, org.springframework.security.web.context.SecurityContextPersistenceFilter@e4b54d3, org.springframework.security.web.header.HeaderWriterFilter@2976ef56, org.springframework.security.web.authentication.logout.LogoutFilter@4c41a177, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2b6fcca1, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@e706aa, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@24b3f778, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36665c11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4f2300, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@164dea80, org.springframework.security.web.session.SessionManagementFilter@4152bd0f, org.springframework.security.web.access.ExceptionTranslationFilter@53ba25ff, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@50785f86]
2022-03-02 21:05:21.859  INFO 19096 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 21:05:21.940  WARN 19096 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 21:05:21.959  INFO 19096 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 21:05:22.046  INFO 19096 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 21:05:22.153  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 21:05:22.160  INFO 19096 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:05:22.202  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 21:05:22.202  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 21:05:22.203  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 21:05:22.204  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 21:05:22.204  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 21:05:22.205  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 21:05:22.205  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 21:05:22.511  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 21:05:22.519  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 21:05:22.527  INFO 19096 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 21:05:22.544  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646244322542 with initial instances count: 1
2022-03-02 21:05:22.547  INFO 19096 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 21:05:22.548  INFO 19096 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646244322548, current=UP, previous=STARTING]
2022-03-02 21:05:22.551  INFO 19096 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:05:22.577  INFO 19096 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 21:05:22.578  INFO 19096 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 21:05:22.609  INFO 19096 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:05:22.691  INFO 19096 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.122 seconds (JVM running for 6.689)
2022-03-02 21:05:36.013  INFO 19096 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 21:05:36.013  INFO 19096 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 21:05:36.015  INFO 19096 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2022-03-02 21:05:36.470  INFO 19096 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:354339}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:05:44.624  WARN 19096 --- [http-nio-9001-exec-4] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: fee-service
2022-03-02 21:05:44.626  WARN 19096 --- [http-nio-9001-exec-4] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service fee-service
2022-03-02 21:05:44.640 ERROR 19096 --- [http-nio-9001-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://fee-service/api/fees/bin/555544/amount/300.0] [FeeServiceProxy#getFeeByBinForAmount(String,BigDecimal)]: [Load balancer does not contain an instance for the service fee-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy122.getFeeByBinForAmount(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:39) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 21:06:26.103  WARN 19096 --- [http-nio-9001-exec-6] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 21:06:26.103  WARN 19096 --- [http-nio-9001-exec-6] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 21:06:26.107 ERROR 19096 --- [http-nio-9001-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 21:07:04.144  WARN 19096 --- [http-nio-9001-exec-8] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 21:07:04.144  WARN 19096 --- [http-nio-9001-exec-8] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 21:07:04.146 ERROR 19096 --- [http-nio-9001-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 21:08:00.670  INFO 19096 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 21:08:00.671  INFO 19096 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646244480670, current=DOWN, previous=UP]
2022-03-02 21:08:00.671  INFO 19096 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:08:00.676  INFO 19096 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:08:10.821  INFO 19096 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 21:08:13.829  INFO 19096 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 21:08:13.834  INFO 19096 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 21:08:13.839  INFO 19096 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 21:08:18.898  INFO 18908 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 18908 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:08:18.900  INFO 18908 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:08:20.059  INFO 18908 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:08:20.215  INFO 18908 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 148 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:08:20.526  INFO 18908 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:08:21.009  INFO 18908 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:08:21.022  INFO 18908 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:08:21.023  INFO 18908 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:08:21.173  INFO 18908 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:08:21.173  INFO 18908 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2215 ms
2022-03-02 21:08:21.696  INFO 18908 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:08:21.781  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:08:21.802  WARN 18908 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:08:21.823  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:08:21.825  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:08:21.981  WARN 18908 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:08:22.435  INFO 18908 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:08:22.504  INFO 18908 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:08:22.507  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350067}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.507  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:349262}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.507  INFO 18908 --- [cluster-rtt-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:354368}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.507  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=325305500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:08:20 MSK 2022, lastUpdateTimeNanos=4189326398000}
2022-03-02 21:08:22.507  INFO 18908 --- [cluster-rtt-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350067}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.508  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:354368}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.507  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=326472799, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:08:20 MSK 2022, lastUpdateTimeNanos=4189327075500}
2022-03-02 21:08:22.508  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=297784500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:08:20 MSK 2022, lastUpdateTimeNanos=4189326675399}
2022-03-02 21:08:22.510  INFO 18908 --- [cluster-rtt-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:349262}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.511  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.511  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.511  INFO 18908 --- [cluster-ClusterId{value='621fb29547abf35e21f5c1a4', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:08:22.674  INFO 18908 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:08:22.715  INFO 18908 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@129b69b2, org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.header.HeaderWriterFilter@4fdac2a7, org.springframework.security.web.authentication.logout.LogoutFilter@53ba25ff, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@22c29aa8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@50672905, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@12be4f83, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4cf230bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6ebbc06, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@eb1d475, org.springframework.security.web.session.SessionManagementFilter@70c31b17, org.springframework.security.web.access.ExceptionTranslationFilter@3129299f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4b9f7edc]
2022-03-02 21:08:23.555  INFO 18908 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 21:08:23.620  WARN 18908 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 21:08:23.630  INFO 18908 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 21:08:23.682  INFO 18908 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 21:08:23.770  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 21:08:23.778  INFO 18908 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:08:23.814  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 21:08:23.814  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 21:08:23.814  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 21:08:23.814  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 21:08:23.815  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 21:08:23.815  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 21:08:23.815  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 21:08:24.096  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 21:08:24.103  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 21:08:24.117  INFO 18908 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 21:08:24.128  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646244504127 with initial instances count: 3
2022-03-02 21:08:24.131  INFO 18908 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 21:08:24.131  INFO 18908 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646244504131, current=UP, previous=STARTING]
2022-03-02 21:08:24.133  INFO 18908 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:08:24.153  INFO 18908 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 21:08:24.154  INFO 18908 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 21:08:24.176  INFO 18908 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:08:24.238  INFO 18908 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 5.992 seconds (JVM running for 6.521)
2022-03-02 21:08:30.811  INFO 18908 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 21:08:30.811  INFO 18908 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 21:08:30.814  INFO 18908 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 21:08:35.295  INFO 18908 --- [http-nio-9001-exec-4] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:354392}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:08:35.523  WARN 18908 --- [http-nio-9001-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public ru.otus.spring.rest.dto.TipDto ru.otus.spring.rest.TipController.addTip(java.lang.String,java.lang.String,ru.otus.spring.model.Tip)]
2022-03-02 21:08:58.589  WARN 18908 --- [http-nio-9001-exec-9] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 21:08:58.590  WARN 18908 --- [http-nio-9001-exec-9] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 21:08:58.603 ERROR 18908 --- [http-nio-9001-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 21:10:35.177  WARN 18908 --- [http-nio-9001-exec-1] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: payment-service
2022-03-02 21:10:35.177  WARN 18908 --- [http-nio-9001-exec-1] .s.c.o.l.FeignBlockingLoadBalancerClient : Load balancer does not contain an instance for the service payment-service
2022-03-02 21:10:35.179 ERROR 18908 --- [http-nio-9001-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is ru.otus.spring.exception.OtherAccessException: There is an error while interacting with DAO; nested exception is feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]] with root cause

feign.FeignException$ServiceUnavailable: [503] during [POST] to [http://payment-service/api/payments/add] [PaymentServiceProxy#addPayment(Incoming)]: [Load balancer does not contain an instance for the service payment-service]
	at feign.FeignException.serverErrorStatus(FeignException.java:256) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy125.addPayment(Unknown Source) ~[na:na]
	at ru.otus.spring.service.TipServiceImpl.addTip(TipServiceImpl.java:40) ~[classes/:na]
	at ru.otus.spring.rest.TipController.addTip(TipController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.15.jar:5.3.15]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.3.jar:2.6.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]

2022-03-02 21:13:23.832  INFO 18908 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:17:43.181  INFO 18908 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 21:17:43.182  INFO 18908 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646245063182, current=DOWN, previous=UP]
2022-03-02 21:17:43.182  INFO 18908 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:17:43.188  INFO 18908 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:17:43.387  INFO 18908 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 21:17:46.390  INFO 18908 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 21:17:46.395  INFO 18908 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 21:17:46.400  INFO 18908 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 21:17:54.643  INFO 10848 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 10848 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:17:54.645  INFO 10848 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:17:55.868  INFO 10848 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:17:56.030  INFO 10848 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 155 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:17:56.395  INFO 10848 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:17:56.957  INFO 10848 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:17:56.968  INFO 10848 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:17:56.969  INFO 10848 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:17:57.123  INFO 10848 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:17:57.123  INFO 10848 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2415 ms
2022-03-02 21:17:57.602  INFO 10848 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:17:57.711  WARN 10848 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:17:57.715  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:17:57.754  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:17:57.756  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:17:57.896  WARN 10848 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:17:58.325  INFO 10848 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:17:58.426  INFO 10848 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:17:58.469  INFO 10848 --- [cluster-rtt-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:354524}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.469  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:349401}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.470  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:354524}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.470  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=297552400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:17:50 MSK 2022, lastUpdateTimeNanos=4765289115700}
2022-03-02 21:17:58.471  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=294710400, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:17:50 MSK 2022, lastUpdateTimeNanos=4765290836900}
2022-03-02 21:17:58.471  INFO 10848 --- [cluster-rtt-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:350197}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.473  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350197}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.473  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=301334700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:17:50 MSK 2022, lastUpdateTimeNanos=4765294427100}
2022-03-02 21:17:58.474  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.474  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.474  INFO 10848 --- [cluster-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.476  INFO 10848 --- [cluster-rtt-ClusterId{value='621fb4d5578dd8760a1fe27e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:349403}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:17:58.607  INFO 10848 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:17:58.661  INFO 10848 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c3c3d67, org.springframework.security.web.context.SecurityContextPersistenceFilter@4345fd45, org.springframework.security.web.header.HeaderWriterFilter@3cead673, org.springframework.security.web.authentication.logout.LogoutFilter@52d63b7e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@50785f86, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@19a7906c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@1e258d3b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10d905c1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a709cc7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b6fcca1, org.springframework.security.web.session.SessionManagementFilter@10a0a1e, org.springframework.security.web.access.ExceptionTranslationFilter@341ccfd1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@77eb607e]
2022-03-02 21:17:59.560  WARN 10848 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'compositeDiscoveryClient' defined in class path resource [org/springframework/cloud/client/discovery/composite/CompositeDiscoveryClientAutoConfiguration.class]: Unsatisfied dependency expressed through method 'compositeDiscoveryClient' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simpleDiscoveryClient' defined in class path resource [org/springframework/cloud/client/discovery/simple/SimpleDiscoveryClientAutoConfiguration.class]: Unsatisfied dependency expressed through method 'simpleDiscoveryClient' parameter 0; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'simpleDiscoveryProperties': Could not bind properties to 'SimpleDiscoveryProperties' : prefix=spring.cloud.discovery.client.simple, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under 'spring.cloud.discovery.client.simple.instances.payment-service.uri' to java.util.List<org.springframework.cloud.client.DefaultServiceInstance>
2022-03-02 21:17:59.701  INFO 10848 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 21:17:59.730  INFO 10848 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 21:17:59.749 ERROR 10848 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to bind properties under 'spring.cloud.discovery.client.simple.instances.payment-service.uri' to java.util.List<org.springframework.cloud.client.DefaultServiceInstance>:

    Property: spring.cloud.discovery.client.simple.instances.payment-service.uri
    Value: http://localhost:9201
    Origin: class path resource [application.yml] - 15:22
    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.List<org.springframework.cloud.client.DefaultServiceInstance>]

Action:

Update your application's configuration

2022-03-02 21:18:28.870  INFO 19452 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 19452 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:18:28.872  INFO 19452 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:18:30.043  INFO 19452 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:18:30.191  INFO 19452 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 143 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:18:30.500  INFO 19452 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:18:31.041  INFO 19452 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:18:31.052  INFO 19452 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:18:31.052  INFO 19452 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:18:31.191  INFO 19452 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:18:31.191  INFO 19452 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2261 ms
2022-03-02 21:18:31.742  INFO 19452 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:18:31.824  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:18:31.863  WARN 19452 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:18:31.866  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:18:31.867  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:18:32.051  WARN 19452 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:18:32.395  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:350209}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.396  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:354510}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.396  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=309675600, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:18:25 MSK 2022, lastUpdateTimeNanos=4799215225600}
2022-03-02 21:18:32.396  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=212823000, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:18:25 MSK 2022, lastUpdateTimeNanos=4799217142500}
2022-03-02 21:18:32.397  INFO 19452 --- [cluster-rtt-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:354510}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.398  INFO 19452 --- [cluster-rtt-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350209}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.401  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:349410}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.401  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=308581300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:18:25 MSK 2022, lastUpdateTimeNanos=4799215645200}
2022-03-02 21:18:32.401  INFO 19452 --- [cluster-rtt-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:349410}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.402  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.403  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.403  INFO 19452 --- [cluster-ClusterId{value='621fb4f7376b1d11a42f3f3b', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:18:32.517  INFO 19452 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:18:32.587  INFO 19452 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:18:32.768  INFO 19452 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:18:32.811  INFO 19452 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@65ef9a0a, org.springframework.security.web.context.SecurityContextPersistenceFilter@6bf0f70a, org.springframework.security.web.header.HeaderWriterFilter@3e01796a, org.springframework.security.web.authentication.logout.LogoutFilter@5891b7c5, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7bda01da, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@644947ee, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@25216999, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52d63b7e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@43ab0659, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77e6761f, org.springframework.security.web.session.SessionManagementFilter@e91facf, org.springframework.security.web.access.ExceptionTranslationFilter@7a62d697, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d31f14]
2022-03-02 21:18:33.661  WARN 19452 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'compositeDiscoveryClient' defined in class path resource [org/springframework/cloud/client/discovery/composite/CompositeDiscoveryClientAutoConfiguration.class]: Unsatisfied dependency expressed through method 'compositeDiscoveryClient' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simpleDiscoveryClient' defined in class path resource [org/springframework/cloud/client/discovery/simple/SimpleDiscoveryClientAutoConfiguration.class]: Unsatisfied dependency expressed through method 'simpleDiscoveryClient' parameter 0; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'simpleDiscoveryProperties': Could not bind properties to 'SimpleDiscoveryProperties' : prefix=spring.cloud.discovery.client.simple, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under 'spring.cloud.discovery.client.simple.instances.payment-service.uri' to java.util.List<org.springframework.cloud.client.DefaultServiceInstance>
2022-03-02 21:18:33.808  INFO 19452 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 21:18:33.830  INFO 19452 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 21:18:33.851 ERROR 19452 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to bind properties under 'spring.cloud.discovery.client.simple.instances.payment-service.uri' to java.util.List<org.springframework.cloud.client.DefaultServiceInstance>:

    Property: spring.cloud.discovery.client.simple.instances.payment-service.uri
    Value: http://localhost:9201
    Origin: class path resource [application.yml] - 15:22
    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.List<org.springframework.cloud.client.DefaultServiceInstance>]

Action:

Update your application's configuration

2022-03-02 21:19:19.721  INFO 7876 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 7876 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:19:19.723  INFO 7876 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:19:20.949  INFO 7876 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:19:21.101  INFO 7876 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 147 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:19:21.420  INFO 7876 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:19:21.952  INFO 7876 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:19:21.966  INFO 7876 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:19:21.967  INFO 7876 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:19:22.111  INFO 7876 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:19:22.111  INFO 7876 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2330 ms
2022-03-02 21:19:22.639  INFO 7876 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:19:22.752  WARN 7876 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:19:22.756  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:19:22.794  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:19:22.796  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:19:22.945  WARN 7876 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:19:23.385  INFO 7876 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:19:23.493  INFO 7876 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:19:23.553  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:354547}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.553  INFO 7876 --- [cluster-rtt-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350230}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.553  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=318717500, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:19:15 MSK 2022, lastUpdateTimeNanos=4850371389500}
2022-03-02 21:19:23.554  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:349415}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.554  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=316935100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:19:15 MSK 2022, lastUpdateTimeNanos=4850373516300}
2022-03-02 21:19:23.553  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350230}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.553  INFO 7876 --- [cluster-rtt-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:349415}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.554  INFO 7876 --- [cluster-rtt-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:354547}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.555  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=315416300, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:19:15 MSK 2022, lastUpdateTimeNanos=4850373439900}
2022-03-02 21:19:23.556  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.557  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.557  INFO 7876 --- [cluster-ClusterId{value='621fb52a57f5f91376e89a4d', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:19:23.704  INFO 7876 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:19:23.747  INFO 7876 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@129b69b2, org.springframework.security.web.context.SecurityContextPersistenceFilter@5950054d, org.springframework.security.web.header.HeaderWriterFilter@4fdac2a7, org.springframework.security.web.authentication.logout.LogoutFilter@53ba25ff, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@22c29aa8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@50672905, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@12be4f83, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4cf230bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6ebbc06, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@eb1d475, org.springframework.security.web.session.SessionManagementFilter@70c31b17, org.springframework.security.web.access.ExceptionTranslationFilter@3129299f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4b9f7edc]
2022-03-02 21:19:24.684  WARN 7876 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'compositeDiscoveryClient' defined in class path resource [org/springframework/cloud/client/discovery/composite/CompositeDiscoveryClientAutoConfiguration.class]: Unsatisfied dependency expressed through method 'compositeDiscoveryClient' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'simpleDiscoveryClient' defined in class path resource [org/springframework/cloud/client/discovery/simple/SimpleDiscoveryClientAutoConfiguration.class]: Unsatisfied dependency expressed through method 'simpleDiscoveryClient' parameter 0; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'simpleDiscoveryProperties': Could not bind properties to 'SimpleDiscoveryProperties' : prefix=spring.cloud.discovery.client.simple, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under 'spring.cloud.discovery.client.simple.instances.payment-service.uri' to java.util.List<org.springframework.cloud.client.DefaultServiceInstance>
2022-03-02 21:19:24.825  INFO 7876 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2022-03-02 21:19:24.845  INFO 7876 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-03-02 21:19:24.870 ERROR 7876 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to bind properties under 'spring.cloud.discovery.client.simple.instances.payment-service.uri' to java.util.List<org.springframework.cloud.client.DefaultServiceInstance>:

    Property: spring.cloud.discovery.client.simple.instances.payment-service.uri
    Value: http://localhost:9201
    Origin: class path resource [application.yml] - 15:22
    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.List<org.springframework.cloud.client.DefaultServiceInstance>]

Action:

Update your application's configuration

2022-03-02 21:19:57.516  INFO 17496 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 17496 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:19:57.518  INFO 17496 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:19:58.865  INFO 17496 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:19:59.028  INFO 17496 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 156 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:19:59.353  INFO 17496 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:19:59.871  INFO 17496 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:19:59.883  INFO 17496 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:19:59.884  INFO 17496 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:20:00.032  INFO 17496 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:20:00.032  INFO 17496 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2456 ms
2022-03-02 21:20:00.574  INFO 17496 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:20:00.673  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:20:00.677  WARN 17496 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:20:00.710  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:20:00.712  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:20:00.868  WARN 17496 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:20:01.215  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:354548}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.215  INFO 17496 --- [cluster-rtt-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:350237}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.215  INFO 17496 --- [cluster-rtt-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:354548}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.215  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:350237}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.216  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=278778200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:20:01 MSK 2022, lastUpdateTimeNanos=4888035783900}
2022-03-02 21:20:01.216  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=278163200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:20:01 MSK 2022, lastUpdateTimeNanos=4888035702000}
2022-03-02 21:20:01.216  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:349430}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.216  INFO 17496 --- [cluster-rtt-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:349430}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.217  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=171421700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:20:01 MSK 2022, lastUpdateTimeNanos=4888035662500}
2022-03-02 21:20:01.219  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.220  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.220  INFO 17496 --- [cluster-ClusterId{value='621fb5505ee480087fcd9bb9', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:01.312  INFO 17496 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:20:01.373  INFO 17496 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:20:01.559  INFO 17496 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:20:01.602  INFO 17496 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@75e4fe3c, org.springframework.security.web.context.SecurityContextPersistenceFilter@25e6c22a, org.springframework.security.web.header.HeaderWriterFilter@19a7906c, org.springframework.security.web.authentication.logout.LogoutFilter@5f3ddc86, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@404009df, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@e91facf, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7bda01da, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@516c20de, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62ab5e63, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@65ef9a0a, org.springframework.security.web.session.SessionManagementFilter@3e4f2300, org.springframework.security.web.access.ExceptionTranslationFilter@6e49b011, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1b25d695]
2022-03-02 21:20:02.451  INFO 17496 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 21:20:02.521  WARN 17496 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 21:20:02.535  INFO 17496 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 21:20:02.585  INFO 17496 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 21:20:02.674  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 21:20:02.681  INFO 17496 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:20:02.720  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 21:20:02.720  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 21:20:02.720  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 21:20:02.720  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 21:20:02.720  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 21:20:02.721  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 21:20:02.721  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 21:20:02.999  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 21:20:03.006  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 21:20:03.013  INFO 17496 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 21:20:03.026  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646245203025 with initial instances count: 2
2022-03-02 21:20:03.028  INFO 17496 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 21:20:03.029  INFO 17496 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646245203029, current=UP, previous=STARTING]
2022-03-02 21:20:03.031  INFO 17496 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:20:03.052  INFO 17496 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 21:20:03.053  INFO 17496 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 21:20:03.077  INFO 17496 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:20:03.138  INFO 17496 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.336 seconds (JVM running for 6.926)
2022-03-02 21:20:20.571  INFO 17496 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 21:20:20.572  INFO 17496 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646245220572, current=DOWN, previous=UP]
2022-03-02 21:20:20.572  INFO 17496 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:20:20.578  INFO 17496 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:20:20.739  INFO 17496 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 21:20:23.754  INFO 17496 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 21:20:23.759  INFO 17496 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 21:20:23.764  INFO 17496 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 21:20:27.632  INFO 14884 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 14884 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:20:27.635  INFO 14884 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:20:28.848  INFO 14884 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:20:29.007  INFO 14884 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 154 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:20:29.323  INFO 14884 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:20:29.825  INFO 14884 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:20:29.837  INFO 14884 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:20:29.838  INFO 14884 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:20:30.284  INFO 14884 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:20:30.284  INFO 14884 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2589 ms
2022-03-02 21:20:30.794  INFO 14884 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:20:30.907  WARN 14884 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:20:31.065  WARN 14884 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:20:31.199  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:20:31.238  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:20:31.240  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:20:31.476  INFO 14884 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:20:31.567  INFO 14884 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:20:31.780  INFO 14884 --- [cluster-rtt-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:354568}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.780  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:354568}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.780  INFO 14884 --- [cluster-rtt-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:350243}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.781  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=178998900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:20:27 MSK 2022, lastUpdateTimeNanos=4918599725600}
2022-03-02 21:20:31.783  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:349443}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.783  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=304211900, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:20:27 MSK 2022, lastUpdateTimeNanos=4918604169500}
2022-03-02 21:20:31.783  INFO 14884 --- [cluster-rtt-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:349443}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.783  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:350243}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.784  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.784  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=252928700, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:20:27 MSK 2022, lastUpdateTimeNanos=4918604838900}
2022-03-02 21:20:31.785  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.785  INFO 14884 --- [cluster-ClusterId{value='621fb56e73f8352620ef166e', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:20:31.829  INFO 14884 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:20:31.880  INFO 14884 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e258d3b, org.springframework.security.web.context.SecurityContextPersistenceFilter@4152bd0f, org.springframework.security.web.header.HeaderWriterFilter@53ba25ff, org.springframework.security.web.authentication.logout.LogoutFilter@74830d73, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7c3c3d67, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1da5c19d, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2b6fcca1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e4b54d3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@19a7906c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39f93225, org.springframework.security.web.session.SessionManagementFilter@2976ef56, org.springframework.security.web.access.ExceptionTranslationFilter@5bde6148, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1f1fbc9f]
2022-03-02 21:20:32.734  INFO 14884 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 21:20:32.804  WARN 14884 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 21:20:32.816  INFO 14884 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 21:20:32.879  INFO 14884 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 21:20:32.970  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 21:20:32.979  INFO 14884 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:20:33.014  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 21:20:33.014  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 21:20:33.014  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 21:20:33.014  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 21:20:33.014  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 21:20:33.014  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 21:20:33.015  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 21:20:33.330  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 21:20:33.335  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 21:20:33.341  INFO 14884 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 21:20:33.356  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646245233355 with initial instances count: 2
2022-03-02 21:20:33.358  INFO 14884 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 21:20:33.359  INFO 14884 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646245233359, current=UP, previous=STARTING]
2022-03-02 21:20:33.361  INFO 14884 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:20:33.384  INFO 14884 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 21:20:33.385  INFO 14884 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 21:20:33.412  INFO 14884 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:20:33.475  INFO 14884 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.544 seconds (JVM running for 7.109)
2022-03-02 21:20:49.692  INFO 14884 --- [http-nio-9001-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 21:20:49.693  INFO 14884 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 21:20:49.698  INFO 14884 --- [http-nio-9001-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2022-03-02 21:20:50.147  INFO 14884 --- [http-nio-9001-exec-1] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:354580}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:25:33.023  INFO 14884 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:30:33.032  INFO 14884 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:35:33.037  INFO 14884 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:40:33.053  INFO 14884 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:45:33.055  INFO 14884 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:50:33.059  INFO 14884 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:53:09.850  INFO 14884 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 21:53:09.850  INFO 14884 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646247189850, current=DOWN, previous=UP]
2022-03-02 21:53:09.850  INFO 14884 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:53:09.858  INFO 14884 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:53:10.060  INFO 14884 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 21:53:13.071  INFO 14884 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 21:53:13.075  INFO 14884 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 21:53:13.079  INFO 14884 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2022-03-02 21:57:30.671  INFO 6876 --- [main] ru.otus.spring.TipsServiceApplication    : Starting TipsServiceApplication using Java 16.0.2 on DESKTOP-V680D6E with PID 6876 (C:\JAVA\Homeworks\spring-project\spring-payment-gateway\tips-service\target\classes started by ctm99 in C:\JAVA\Homeworks\spring-project\spring-payment-gateway)
2022-03-02 21:57:30.674  INFO 6876 --- [main] ru.otus.spring.TipsServiceApplication    : No active profile set, falling back to default profiles: default
2022-03-02 21:57:31.873  INFO 6876 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-03-02 21:57:32.030  INFO 6876 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 148 ms. Found 4 MongoDB repository interfaces.
2022-03-02 21:57:32.320  INFO 6876 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=94c38590-569f-35b6-a228-a48630e2130c
2022-03-02 21:57:32.823  INFO 6876 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9001 (http)
2022-03-02 21:57:32.837  INFO 6876 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-03-02 21:57:32.838  INFO 6876 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.56]
2022-03-02 21:57:32.983  INFO 6876 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-03-02 21:57:32.983  INFO 6876 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2251 ms
2022-03-02 21:57:33.538  INFO 6876 --- [main] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[127.0.0.1:27017], srvHost=cluster0.vbyd5.mongodb.net, mode=MULTIPLE, requiredClusterType=REPLICA_SET, serverSelectionTimeout='30000 ms', requiredReplicaSetName='atlas-x7scl9-shard-0'}
2022-03-02 21:57:33.644  WARN 6876 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:57:33.650  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-02.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:57:33.688  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-01.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:57:33.690  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-srv-cluster0.vbyd5.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server cluster0-shard-00-00.vbyd5.mongodb.net:27017 to client view of cluster
2022-03-02 21:57:33.828  WARN 6876 --- [main] o.s.data.convert.CustomConversions       : Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2022-03-02 21:57:34.232  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:355107}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.232  INFO 6876 --- [cluster-rtt-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:349990}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.233  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:349990}] to cluster0-shard-00-02.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.233  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-01.vbyd5.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=313172200, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-01.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff0000000000000009, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b0e9c649a31308f8104, counter=8}, lastWriteDate=Wed Mar 02 21:57:33 MSK 2022, lastUpdateTimeNanos=7141052328300}
2022-03-02 21:57:34.232  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:350793}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.233  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-02.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-02.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=314319100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-02.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3b254aacb85c444a9315, counter=5}, lastWriteDate=Wed Mar 02 21:57:33 MSK 2022, lastUpdateTimeNanos=7141052154300}
2022-03-02 21:57:34.233  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=cluster0-shard-00-00.vbyd5.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=314495100, setName='atlas-x7scl9-shard-0', canonicalAddress=cluster0-shard-00-00.vbyd5.mongodb.net:27017, hosts=[cluster0-shard-00-00.vbyd5.mongodb.net:27017, cluster0-shard-00-02.vbyd5.mongodb.net:27017, cluster0-shard-00-01.vbyd5.mongodb.net:27017], passives=[], arbiters=[], primary='cluster0-shard-00-01.vbyd5.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_NORTH_1'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=620d3af81076492d679a3cc0, counter=6}, lastWriteDate=Wed Mar 02 21:57:33 MSK 2022, lastUpdateTimeNanos=7141052330300}
2022-03-02 21:57:34.232  INFO 6876 --- [cluster-rtt-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:355098}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.232  INFO 6876 --- [cluster-rtt-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-00.vbyd5.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:350793}] to cluster0-shard-00-00.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.236  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff0000000000000009 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.236  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.236  INFO 6876 --- [cluster-ClusterId{value='621fbe1d99928a504eda5bf5', description='null'}-cluster0-shard-00-01.vbyd5.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 21:57:34.325  INFO 6876 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'fee-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:57:34.388  INFO 6876 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'payment-service' URL not provided. Will try picking an instance via load-balancing.
2022-03-02 21:57:34.575  INFO 6876 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Ant [pattern='/'] with []
2022-03-02 21:57:34.622  INFO 6876 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@65ef9a0a, org.springframework.security.web.context.SecurityContextPersistenceFilter@19a7906c, org.springframework.security.web.header.HeaderWriterFilter@62883f8a, org.springframework.security.web.authentication.logout.LogoutFilter@5891b7c5, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7bda01da, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@644947ee, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@25216999, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7a62d697, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e8f0f98, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77e6761f, org.springframework.security.web.session.SessionManagementFilter@6e49b011, org.springframework.security.web.access.ExceptionTranslationFilter@10d905c1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d31f14]
2022-03-02 21:57:35.450  INFO 6876 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-03-02 21:57:35.513  WARN 6876 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-03-02 21:57:35.523  INFO 6876 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 17 endpoint(s) beneath base path '/actuator'
2022-03-02 21:57:35.579  INFO 6876 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-03-02 21:57:35.665  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-03-02 21:57:35.673  INFO 6876 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 21:57:35.713  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-03-02 21:57:35.713  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-03-02 21:57:35.714  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-03-02 21:57:35.714  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-03-02 21:57:35.714  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-03-02 21:57:35.714  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-03-02 21:57:35.714  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-03-02 21:57:36.025  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-03-02 21:57:36.031  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-03-02 21:57:36.036  INFO 6876 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-03-02 21:57:36.042  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1646247456041 with initial instances count: 2
2022-03-02 21:57:36.045  INFO 6876 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TIPS-SERVICE with eureka with status UP
2022-03-02 21:57:36.045  INFO 6876 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646247456045, current=UP, previous=STARTING]
2022-03-02 21:57:36.047  INFO 6876 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 21:57:36.069  INFO 6876 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9001 (http) with context path ''
2022-03-02 21:57:36.070  INFO 6876 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9001
2022-03-02 21:57:36.095  INFO 6876 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 21:57:36.154  INFO 6876 --- [main] ru.otus.spring.TipsServiceApplication    : Started TipsServiceApplication in 6.14 seconds (JVM running for 6.713)
2022-03-02 22:00:00.380  INFO 6876 --- [http-nio-9001-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-03-02 22:00:00.381  INFO 6876 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2022-03-02 22:00:00.384  INFO 6876 --- [http-nio-9001-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2022-03-02 22:00:01.014  INFO 6876 --- [http-nio-9001-exec-2] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:355129}] to cluster0-shard-00-01.vbyd5.mongodb.net:27017
2022-03-02 22:02:35.731  INFO 6876 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-03-02 22:04:08.138  INFO 6876 --- [SpringApplicationShutdownHook] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TIPS-SERVICE with eureka with status DOWN
2022-03-02 22:04:08.138  INFO 6876 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1646247848138, current=DOWN, previous=UP]
2022-03-02 22:04:08.139  INFO 6876 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001: registering service...
2022-03-02 22:04:08.144  INFO 6876 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - registration status: 204
2022-03-02 22:04:08.344  INFO 6876 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2022-03-02 22:04:11.358  INFO 6876 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2022-03-02 22:04:11.365  INFO 6876 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TIPS-SERVICE/tips-service:9001 - deregister  status: 200
2022-03-02 22:04:11.371  INFO 6876 --- [SpringApplicationShutdownHook] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
